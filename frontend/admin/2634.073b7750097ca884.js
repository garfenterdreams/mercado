"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[2634],{42634:(X,D,l)=>{l.r(D),l.d(D,{EmailTemplateModule:()=>wt});var n=l(60177),_=l(40528),h=l(89417),u=l(74054),M=l(94194),t=l(54438);let C=(()=>{class a extends M.j{constructor(){super(...arguments),this.url=this.getBaseUrl()}setemailtemplistdata(e){this.emailtemplistdata=e}getemailtemplistdata(){return this.emailtemplistdata}addEmailtemp(e){return this.http.post(this.url+"/email-template/add-email-template",e)}updateEmailTemp(e){return this.http.put(this.url+"/email-template/update-email-template/"+e.Id,e)}emailtemplist(e){let i={};return i=e,this.http.get(this.url+"/email-template/email-templatelist",{params:i})}emailtempPagiantion(e){let i={};return i=e,this.http.get(this.url+"/email-template/email-templatelist",{params:i})}deleteEmailtemp(e,i){return this.http.delete(this.url+"/email-template/delete-email-template/"+i,e)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=t.xGo(a)))(s||a)}})()}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var c=l(15774),p=l(34514),r=l(88346);const d=a=>a.emailtemp,g=(0,p.Mz)(d,r.nN),T=(0,p.Mz)(d,r.PD),b=(0,p.Mz)(d,r.Er),S=(0,p.Mz)(d,r.vA),V=(0,p.Mz)(d,r.EE),z=(0,p.Mz)(d,r.vT),w=(0,p.Mz)(d,r.Sr),Y=(0,p.Mz)(d,r.OX),B=(0,p.Mz)(d,r.QQ),H=(0,p.Mz)(d,r.ZV),Q=(0,p.Mz)(d,r.xP),K=(0,p.Mz)(d,r.og),W=(0,p.Mz)(d,r.P8),J=(0,p.Mz)(d,r.H8),Z=(0,p.Mz)(d,r.cD),q=(0,p.Mz)(d,r.$H),tt=(0,p.Mz)(d,r.D9),et=(0,p.Mz)(d,r.Ag),it=(0,p.Mz)(d,r.dZ),at=(0,p.Mz)(d,r.Jt);class R{constructor(o){this.title=o.title||"",this.subject=o.subject||"",this.content=o.content||"",this.status=o.status||0,this.dynamicFieldsRef=o.dynamicFieldsRef||"",o&&o.id&&(this.Id=o.id||0)}}class G{constructor(o){this.limit=o.limit||0,this.offset=o.offset||0,this.keyword=o.keyword||"",this.count=o.count||0}}var nt=l(84745),E=l(51188),st=l(48256);let j=(()=>{class a{constructor(e,i,s){this.appState=e,this.router=i,this.toastr=s,this.emailTempList$=this.appState.select(g),this.emailTempPagination$=this.appState.select(T),this.getAddEmailTemp$=this.appState.select(b),this.updateEmailTemp$=this.appState.select(S),this.emailTempDelete$=this.appState.select(V),this.emailTempListLoading$=this.appState.select(z),this.emailTempListLoaded$=this.appState.select(w),this.emailTempListFailed$=this.appState.select(Y),this.emailTempDeleteLoading$=this.appState.select(Z),this.emailTempDeleteLoaded$=this.appState.select(q),this.emailTempDeleteFailed$=this.appState.select(tt),this.emailTempCountLoading$=this.appState.select(B),this.emailTempCountLoaded$=this.appState.select(H),this.emailTempCountFailed$=this.appState.select(Q),this.emailTempAddLoading$=this.appState.select(K),this.emailTempAddLoaded$=this.appState.select(W),this.emailTempAddFailed$=this.appState.select(J),this.emailTempUpdateLoading$=this.appState.select(et),this.emailTempUpdateLoaded$=this.appState.select(it),this.emailTempUpdateFailed$=this.appState.select(at),this.subscriptions=[]}addEmailTemplate(e){this.appState.dispatch(new c.cK(new R(e)))}updateEmailTemplate(e){this.appState.dispatch(new c.jq(new R(e)))}getEmailTemplateList(e){this.appState.dispatch(new c.YB(new G(e)))}emailTemplateDelete(e){this.appState.dispatch(new c.ll(e))}emailTemplatePagination(e){this.appState.dispatch(new c.Qn(new G(e)))}subscribe(){this.subscriptions.push(this.getAddEmailTemp$.subscribe(e=>{e&&e.message&&this.router.navigate(["/settings/local/emailtemp"])})),this.subscriptions.push(this.updateEmailTemp$.subscribe(e=>{e&&e.message&&1===e.status&&this.router.navigate(["/settings/local/emailtemp"])}))}static{this.\u0275fac=function(i){return new(i||a)(t.KVO(nt.il),t.KVO(E.Ix),t.KVO(st.tw))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var I=l(7673),F=l(96354),f=l(25558),O=l(99437);let lt=(()=>{class a{constructor(e,i){this.action$=e,this.service=i,this.doAddEmailTemp$=(0,u.EH)(()=>this.action$.pipe((0,u.gp)(c.Q3.DO_NEW_EMAIL_TEMP_ACTION),(0,F.T)(s=>s.payload),(0,f.n)(s=>this.service.addEmailtemp(s).pipe((0,f.n)(m=>[new c.v7(m)]),(0,O.W)(m=>(0,I.of)(new c.iP(m))))))),this.doUpdateEmailTemp$=(0,u.EH)(()=>this.action$.pipe((0,u.gp)(c.Q3.DO_UPDATE_EMAIL_TEMP_ACTION),(0,F.T)(s=>s.payload),(0,f.n)(s=>this.service.updateEmailTemp(s).pipe((0,f.n)(m=>[new c.yh(m)]),(0,O.W)(m=>(0,I.of)(new c.lP(m))))))),this.doemailtemplists$=(0,u.EH)(()=>this.action$.pipe((0,u.gp)(c.Q3.GET_EMAIL_TEMP_LIST_ACTION),(0,F.T)(s=>s.payload),(0,f.n)(s=>this.service.emailtemplist(s).pipe((0,f.n)(m=>[new c.TI(m)]),(0,O.W)(m=>(0,I.of)(new c.gn(m))))))),this.doemailtemppagination$=(0,u.EH)(()=>this.action$.pipe((0,u.gp)(c.Q3.GET_EMAIL_TEMP_COUNT_ACTION),(0,F.T)(s=>s.payload),(0,f.n)(s=>this.service.emailtempPagiantion(s).pipe((0,f.n)(m=>[new c.Jl(m)]),(0,O.W)(m=>(0,I.of)(new c.sH(m))))))),this.doEmailtempDelete$=(0,u.EH)(()=>this.action$.pipe((0,u.gp)(c.Q3.DO_EMAIL_TEMP_DELETE),(0,F.T)(s=>s.payload),(0,f.n)(s=>this.service.deleteEmailtemp(s,s.emailTemplateId).pipe((0,f.n)(v=>[new c.WD(v)]),(0,O.W)(v=>(0,I.of)(new c.fG(v)))))))}static{this.\u0275fac=function(i){return new(i||a)(t.KVO(u.En),t.KVO(C))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();function k(a){const o=a.dynamicFieldsRef.split(",").map(e=>e.slice(1,-1));for(const e of o)if(!a.content.includes(`{${e}}`))return!0;return!1}const ot={Title:{label:"Settings.Local.Emailtemplate.Title",name:"title",validatiors:[h.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Title",mandatory:!0},Subject:{label:"Settings.Local.Emailtemplate.Subject",name:"subject",validatiors:[h.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Subject",mandatory:!0,isDisabled:!0},dynamicFieldsRef:{label:"Settings.Local.Emailtemplate.DynamicFieldsRef",name:"dynamicFieldsRef",validatiors:[h.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.DynamicFieldsRef",mandatory:!0,isDisabled:!0},Content:{label:"Settings.Local.Emailtemplate.Content",name:"content",validatiors:[h.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Content",mandatory:!0,isDisabled:!0},status:{label:"Settings.Local.Emailtemplate.Status",name:"status",validatiors:[h.k0.required],type:"ngSelect",placeholder:"Settings.Local.Emailtemplate.Status",mandatory:!0,customData:{data:[{id:1,name:"Enabled",displayName:"Settings.Local.Language.Enabled"},{id:0,name:"Disabled",displayName:"Settings.Local.Language.Enabled"}],key:"name",value:"id"}}};var mt=l(43718),rt=l.n(mt),N=l(98852),y=l(37886),ct=l(70782),pt=l(18186),L=l(41780);const dt=(a,o)=>({"is-invalid":a,isDisable:o});function ut(a,o){1&a&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"Settings.Local.Emailtemplate.Error.Contentisrequired")))}function ht(a,o){if(1&a&&(t.j41(0,"div",14),t.DNE(1,ut,3,3,"div",9),t.k0s()),2&a){const e=t.XpG(3);t.R7$(),t.Y8G("ngIf",e.f.content.errors.required)}}function gt(a,o){1&a&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.Dynamic field value")," "))}function ft(a,o){if(1&a&&(t.qex(0),t.j41(1,"div",10)(2,"label"),t.EFF(3),t.nI1(4,"translate"),t.j41(5,"sup"),t.EFF(6,"*"),t.k0s()(),t.nrm(7,"textarea",11),t.DNE(8,ht,2,1,"div",12)(9,gt,3,3,"div",13),t.k0s(),t.bVm()),2&a){const e=t.XpG().$implicit,i=t.XpG();t.R7$(3),t.JRh(t.bMT(4,6,"Settings.Local.Emailtemplate.Content")),t.R7$(4),t.Y8G("formControl",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].control)("ngClass",t.l_i(8,dt,i.submitted&&i.f.content.errors,null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled))("readonly",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.content.errors),t.R7$(),t.Y8G("ngIf",i.dynamicFieldsValue&&i.submitted)}}function bt(a,o){if(1&a&&(t.qex(0),t.nrm(1,"app-common-form",16),t.bVm()),2&a){const e=t.XpG().$implicit,i=t.XpG();t.R7$(),t.Y8G("type",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].type)("control",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].control)("label",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].label)("inputId",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].inputId)("aliasName",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].aliasName)("placeholder",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].placeholder)("submitted",i.submitted)("customData",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].customData)("mandatory",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].mandatory)("isDisabled",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled)}}function Tt(a,o){if(1&a&&(t.qex(0),t.DNE(1,ft,10,11,"ng-container",9)(2,bt,2,10,"ng-container",9),t.bVm()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","Content"==e),t.R7$(),t.Y8G("ngIf","Content"!=e)}}let x=(()=>{class a{constructor(e,i,s,m,v,A,P,Yt){this.modalService=e,this.fb=i,this.route=s,this.sandbox=m,this.router=v,this.service=A,this.changeDetectRef=P,this.ckeconfiqservice=Yt,this._Object=Object,this.dynamicObjControls={},this.editEmailTemplateInfo=[],this.submitted=!1,this.dynamicFieldsValue=!1,this.editor=rt(),this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.trackByIndex=Bt=>Bt,this.config=this.ckeconfiqservice.getEditorConfig()}get f(){return this.formObjFormGroup.controls}ngOnInit(){this.buildForm(),this.editEmailTempId=this.route.snapshot.paramMap.get("id"),this.setDefaultValues(),this.editEmailtempList()}setDefaultValues(){this.formObjFormGroup.patchValue({postalcode:"Yes",tc:!0})}close(){this.modalService.close("close")}cancel(){this.router.navigate(["/settings/local/emailtemp"])}onSubmit(){if(this.submitted=!0,this.dynamicFieldsValue=k({content:this.formObjFormGroup.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.formObjFormGroup.invalid||this.dynamicFieldsValue)return;const i={};i.title=this.formObjFormGroup.value.title,i.subject=this.formObjFormGroup.value.subject,i.content=this.formObjFormGroup.value.content,i.status=this.formObjFormGroup.value.status,i.dynamicFieldsRef=this.formObjFormGroup.value.dynamicFieldsRef,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(i.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(i)):this.sandbox.addEmailTemplate(i),this.modalService.close("close")}editEmailtempList(){this.editEmailTemplateInfo.push(this.service.getemailtemplistdata()),null!==this.editEmailTemplateInfo[0]?this.editEmailTemplateInfo[0]&&this.editEmailTemplateInfo[0].title&&(this.updateTitle=1,this.formObjFormGroup.controls.title.setValue(this.editEmailTemplateInfo[0].title),this.formObjFormGroup.controls.subject.setValue(this.editEmailTemplateInfo[0].subject),this.formObjFormGroup.controls.content.setValue(this.htmlTagConversion(this.editEmailTemplateInfo[0].content)),this.formObjFormGroup.controls.status.setValue(this.editEmailTemplateInfo[0].isActive),this.formObjFormGroup.controls.dynamicFieldsRef.setValue(this.editEmailTemplateInfo[0].dynamicFieldsRef)):this.formObjFormGroup=null}htmlTagConversion(e){return e.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&sbquo;","\u201a").replaceAll("&#61;","=").replaceAll("&#45;","-").replaceAll("&hellip;","\u2026").replaceAll("&commat;","@").replaceAll("&copy;","\xa9").replaceAll("&#35;","#").replaceAll("&ldquo;","\u201c").replaceAll("&rsquo;","\u2019").replaceAll("&lsquo;","\u2018").replaceAll("&trade;","\u2122").replaceAll("&reg;","\xae").replaceAll("&ndash;","\u2013").replaceAll("&eacute;","\xe9").replaceAll("&euro;","\u20ac").replaceAll("&pound;","\xa3")}saveChanges(){if(this.submitted=!0,this.dynamicFieldsValue=k({content:this.formObjFormGroup.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.changeDetectRef.detectChanges(),this.formObjFormGroup.invalid)return;const i={};i.title=this.formObjFormGroup.value.title,i.subject=this.formObjFormGroup.value.subject,i.content=this.formObjFormGroup.value.content,i.status=this.formObjFormGroup.value.status,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(i.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(i)):this.sandbox.addEmailTemplate(i),this.modalService.close("close")}buildForm(){const e=ot,i=(0,N.b0)(e);this.formObjFormGroup=this.fb.group(i),Object.keys(e).forEach(s=>{this.dynamicObjControls[s]=(0,N.yE)(e[s],this.formObjFormGroup)})}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(y.Lw),t.rXU(h.ze),t.rXU(E.nX),t.rXU(j),t.rXU(E.Ix),t.rXU(C),t.rXU(t.gRc),t.rXU(ct.z))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-spurt-addemail"]],decls:15,vars:11,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"modal-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"action-button-container","flex"],[1,"button-reg","btn-md","tertiary",3,"click"],["type","submit()",1,"button-reg","btn-md","primary",3,"click"],[4,"ngIf"],[1,"form-group"],[2,"height","9rem",3,"formControl","ngClass","readonly"],["class","invalid-feedback",4,"ngIf"],["class","errors",4,"ngIf"],[1,"invalid-feedback"],[1,"errors"],[3,"type","control","label","inputId","aliasName","placeholder","submitted","customData","mandatory","isDisabled"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return s.close()}),t.nrm(5,"img",3),t.k0s()(),t.j41(6,"div",4),t.DNE(7,Tt,3,2,"ng-container",5),t.k0s(),t.j41(8,"div",6)(9,"button",7),t.bIt("click",function(){return s.close()}),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"button",8),t.bIt("click",function(){return s.onSubmit()}),t.EFF(13),t.nI1(14,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(s.updateTitle?"Update Email Template":t.bMT(3,5,"Add Email Template")),t.R7$(5),t.Y8G("ngForOf",s._Object.keys(s.dynamicObjControls))("ngForTrackBy",s.trackByIndex),t.R7$(3),t.JRh(t.bMT(11,7,"Settings.generalsettings.Cancel")),t.R7$(3),t.JRh(t.bMT(14,9,"Settings.generalsettings.Save")))},dependencies:[n.YU,n.Sq,n.bT,h.me,h.BC,h.l_,pt.V,L.D9],styles:[".errors[_ngcontent-%COMP%]{color:red}.isDisable[_ngcontent-%COMP%]{opacity:.6}",".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}"]})}}return a})();var Et=l(55735),yt=l(64363);function U(a){for(const o in a)a.hasOwnProperty(o)&&(null==a[o]||""===a[o])&&delete a[o];return a}const Ct={1:{text:"common.Active",class:"active"},0:{text:"common.In-Active",class:"inactive"}};var St=l(18359),It=l(345),Ft=l(34501),Ot=l(74937),Dt=l(42612),Mt=l(87277);const Lt=(a,o,e)=>({productStatus:a,itemsDynamic:o,ElementEmailContent:e});function _t(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-common-table",23),t.nI1(1,"async"),t.bIt("buttonChangeEvent",function(s){t.eBV(e);const m=t.XpG(2);return t.Njj(m.buttonAction(s))}),t.k0s()}if(2&a){t.XpG();const e=t.sdS(11),i=t.sdS(13),s=t.sdS(15),m=t.XpG();t.Y8G("HeadArray",m.dynamicColumnFields)("GridArray",t.bMT(1,3,m.sandbox.emailTempList$))("customTemplate",t.sMw(5,Lt,e,s,i))}}function jt(a,o){if(1&a&&t.nrm(0,"app-common-badge",24),2&a){const e=o.$implicit,i=t.XpG(2);t.Y8G("badge",i.badgeStatusMappings.hasOwnProperty(e.isActive)?i.badgeStatusMappings[e.isActive]:"")}}function xt(a,o){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(e.content)}}function $t(a,o){1&a&&t.nrm(0,"span",25),2&a&&t.Y8G("innerHTML",o.$implicit.dynamicFieldsRef,t.npT)}function At(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-reusable-pagination",26),t.bIt("pageChange",function(s){t.eBV(e);const m=t.XpG(2);return t.Njj(m.onPageChange(s))}),t.k0s()}if(2&a){const e=t.XpG(2);t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",e.listCount)("pageSize",e.limit)}}function Pt(a,o){if(1&a&&(t.j41(0,"div",14),t.nrm(1,"div",15),t.k0s(),t.j41(2,"div",16)(3,"div",17),t.nrm(4,"app-global-loader",18),t.nI1(5,"async"),t.k0s(),t.j41(6,"div",19)(7,"div",20),t.DNE(8,_t,2,9,"app-common-table",21),t.nI1(9,"async"),t.DNE(10,jt,1,1,"ng-template",null,1,t.C5r)(12,xt,2,1,"ng-template",null,2,t.C5r)(14,$t,1,1,"ng-template",null,3,t.C5r)(16,At,1,4,"app-reusable-pagination",22),t.k0s()()()),2&a){let e;const i=t.XpG();t.R7$(4),t.Y8G("isShow",t.bMT(5,3,i.sandbox.emailTempListLoading$)),t.R7$(4),t.Y8G("ngIf",(null==(e=t.bMT(9,5,i.sandbox.emailTempList$))?null:e.length)>0),t.R7$(8),t.Y8G("ngIf",i.listCount>i.limit)}}let Rt=(()=>{class a{constructor(e,i,s,m,v,A,P){this.modal=e,this.router=i,this.sandbox=s,this.service=m,this.titleService=v,this.route=A,this.ref=P,this.dynamicColumnFields=structuredClone((()=>{const a=(0,yt.ZQ)();return[{displayName:"Settings.Local.Emailtemplate.Title",id:"title",type:"default",checked:!0,filterColName:"Settings.Local.Emailtemplate.Title"},{displayName:"Settings.Local.Emailtemplate.Subject",id:"subject",type:"default",checked:!0,filterColName:"Settings.Local.Emailtemplate.Subject",customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"Settings.Local.Emailtemplate.Content",id:"ElementEmailContent",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.Content"},{displayName:"Settings.Local.Emailtemplate.DynamicFieldsRef",id:"itemsDynamic",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.DynamicFieldsRef"},{displayName:"Settings.Local.Emailtemplate.Status",id:"productStatus",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.Status",customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"Settings.Local.Emailtemplate.Action",id:"browser",type:"threeDotMenu",checked:!0,isDisable:!a["edit-email-template"]&&!a["delete-email-template"],customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}},menuData:[{name:"Edit",img:"assets/img/edit.svg",displayName:"marketplace.common.Edit",isDisable:!a["edit-email-template"]},{name:"Delete",img:"assets/img/delete-new.svg",displayName:"marketplace.common.Delete",isDisable:!a["delete-email-template"]}]}]})()),this.badgeStatusMappings=Ct,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.index=0,this.keyword="",this.offset=0,this.paginationCount=!0,this.currentPage=1,this.subscriptions=new St.yU,this.titleService.setTitle("Settings | Personalize"),this.regSubscribeEvents()}ngOnInit(){this.routeSubscribe()}buttonAction(e){"threeDotMenu"===e.key&&("Delete"==e.actionType?this.deleteEmailtemp(e?.vendorOrderId):"Edit"==e.actionType&&this.editEmailtemp(e))}getemailtempList(){this.offset=(this.currentPage-1)*this.limit;const e=U(this.getQueryParam());e.count=0,this.sandbox.getEmailTemplateList(e),this.sandbox.emailTempList$.subscribe(i=>{}),this.updateQueryParam()}getemailtempListCount(){this.offset=(this.currentPage-1)*this.limit;const e=U(this.getQueryParam());e.count=1,this.sandbox.emailTemplatePagination(e),this.sandbox.emailTempPagination$.subscribe(i=>{1==i?.status&&(this.listCount=i.data,this.ref.detectChanges())})}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(i=>{e=i,this.limit=e.limit?Number(e.limit):10,this.offset=e.offset?Number(e.offset):0,this.currentPage=Number(e.offset&&e.limit)?Math.floor(e.offset/e.limit)+1:1})),this.getemailtempList(),this.getemailtempListCount()}getQueryParam(){return{limit:this.limit,offset:this.offset}}addNewEmailTemp(){this.service.setemailtemplistdata(""),this.router.navigate(["/settings/local/emailtemp/add"])}editEmailtemp(e){const i=this.modal.open(x,{windowClass:"add-local",keyboard:!1,backdrop:"static"});e&&(this.service.setemailtemplistdata(e),i.componentInstance.id=e.emailTemplateId)}deleteEmailtemp(e){const i=this.modal.open(Et.i,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});i.componentInstance.key="",i.componentInstance.id="",i.componentInstance.deleteMessage="Email Template",i.result.then(s=>{"Deleted"===s&&(this.sandbox.emailTemplateDelete({emailTemplateId:e}),this.regSubscribeEvents())})}regSubscribeEvents(){this.sandbox.emailTempDelete$.subscribe(e=>{e&&1===e.status&&this.getemailtempList()})}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getemailtempList()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(y.Bq),t.rXU(E.Ix),t.rXU(j),t.rXU(C),t.rXU(It.hE),t.rXU(E.nX),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-spurt-listemailtemp"]],decls:17,vars:7,consts:[["nav","ngbNav"],["itemTemplateRef",""],["elementEmailContent",""],["dynamicFieldsRef",""],[1,"local-content"],[1,"set-lay-notes","flex"],[1,"setup-wrapper","set-loc-wrapper"],[1,"setup-container","localization-container"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],["ngbNav","",2,"width","100%"],["ngbNavItem",""],["ngbNavContent","",2,"display","flex !important"],[1,"mt-2",2,"width","100%",3,"ngbNavOutlet"],[1,"localize-header","flex"],[1,"loc-hdr-lft"],[1,"setup-right"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(58%, 18%)","position","absolute",3,"isShow"],[1,"product-table"],[1,"table-responsive"],[3,"HeadArray","GridArray","customTemplate","buttonChangeEvent",4,"ngIf"],[3,"type","currentPage","totalItems","pageSize","pageChange",4,"ngIf"],[3,"buttonChangeEvent","HeadArray","GridArray","customTemplate"],[3,"badge"],[3,"innerHTML"],[3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(i,s){if(1&i&&(t.j41(0,"div",4)(1,"div",5)(2,"h4"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"ul",10,0)(14,"li",11),t.DNE(15,Pt,17,7,"ng-template",12),t.k0s()(),t.nrm(16,"div",13),t.k0s()()()()()),2&i){const m=t.sdS(13);t.R7$(3),t.JRh(t.bMT(4,3,"Settings.nav.Note:")),t.R7$(3),t.SpI("",t.bMT(7,5,"Settings.paragraph.Forsendingnotifications")," "),t.R7$(10),t.Y8G("ngbNavOutlet",m)}},dependencies:[n.bT,y.Um,y.X9,y.sy,y.Gx,y.m_,Ft.$,Ot.q,Dt.V,Mt.C,n.Jj,L.D9],styles:[".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}"]})}}return a})();var $=l(79176);const Gt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Rt,canActivate:[$.q],data:{permission:"list-email-template"}},{path:"add",component:x,canActivate:[$.q],data:{permission:"create-email-template"}},{path:"edit/:id",component:x,canActivate:[$.q],data:{permission:"edit-email-template"}}];let kt=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[E.iI.forChild(Gt),E.iI]})}}return a})();var Nt=l(91785),Ut=l(40568),Xt=l(21626),Vt=l(31984),zt=l(95967);let wt=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[C,j],imports:[n.MD,_.D,h.YN,h.X1,Nt.G,kt,Vt.h,u.Vm.forFeature([lt]),L.h.forChild({loader:{provide:L.Wr,useFactory:Ut.M,deps:[Xt.Qq]}}),zt.w]})}}return a})()},55735:(X,D,l)=>{l.d(D,{i:()=>p});var n=l(54438),_=l(37886),h=l(73857),u=l(52619),M=l(41780),t=l(60177);function C(r,d){if(1&r&&(n.j41(0,"p"),n.EFF(1),n.k0s()),2&r){const g=n.XpG();n.R7$(),n.SpI(" Cannot recover a deleted ",g.variantMessage,". Are you sure you want to proceed with deletion ?")}}function c(r,d){if(1&r&&(n.j41(0,"p"),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&r){const g=n.XpG();n.R7$(),n.Lme("",n.bMT(2,2,"common.Are you sure want to delete this")," ",g.deleteMessage,"?")}}let p=(()=>{class r{constructor(g,T,b,S){this.activeModal=g,this.sellerSandbox=T,this.productSandbox=b,this.translate=S}ngOnInit(){}close(){this.activeModal.close()}deleteContent(){"vendor"===this.key?(this.sellerSandbox.deleteSeller({vendorId:this.id}),this.sellerSandbox.deleteLoaded$.subscribe(g=>{!0===g&&this.activeModal.close("deleted")})):"product"===this.key?(this.productSandbox.doProductDelete({productId:this.id}),this.productSandbox.productDeleteLoaded$.subscribe(g=>{!0===g&&this.activeModal.close("deleted")})):this.activeModal.close("deleted"),this.deleteMessage=""}static{this.\u0275fac=function(T){return new(T||r)(n.rXU(_.Lw),n.rXU(h.f),n.rXU(u.F),n.rXU(M.c$))}}static{this.\u0275cmp=n.VBU({type:r,selectors:[["app-delete-confirmation-dialog"]],inputs:{deleteMessage:"deleteMessage",variantMessage:"variantMessage"},decls:17,vars:11,consts:[[1,"modal-body"],["type","button",1,"close",3,"click"],["aria-hidden","true",2,"background-color","white"],[4,"ngIf"],[1,"delete-btns","flex"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(T,b){1&T&&(n.j41(0,"div",0)(1,"button",1),n.bIt("click",function(){return b.close()}),n.j41(2,"span",2),n.EFF(3,"\xd7"),n.k0s()(),n.j41(4,"h3"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,C,2,1,"p",3)(8,c,3,4,"p",3),n.nrm(9,"h4"),n.j41(10,"div",4)(11,"button",5),n.bIt("click",function(){return b.close()}),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"button",6),n.bIt("click",function(){return b.deleteContent()}),n.EFF(15),n.nI1(16,"translate"),n.k0s()()()),2&T&&(n.R7$(5),n.JRh(n.bMT(6,5,"common.Delete Confirmation")),n.R7$(2),n.Y8G("ngIf",b.variantMessage),n.R7$(),n.Y8G("ngIf",!b.variantMessage),n.R7$(4),n.SpI("",n.bMT(13,7,"common.Cancel")," "),n.R7$(3),n.SpI("",n.bMT(16,9,"common.Delete")," "))},dependencies:[t.bT,M.D9],styles:[".modal-title[_ngcontent-%COMP%]{padding:30px 30px 5px;border-bottom:1px solid #eeeeee}.modal-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.close[_ngcontent-%COMP%]{padding:10px;border:none}.close[_ngcontent-%COMP%]:focus{outline:none!important}.modal-footer[_ngcontent-%COMP%]{justify-content:center!important}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]})}}return r})()}}]);