(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[3830],{50885:(M,I,l)=>{"use strict";l.r(I),l.d(I,{CustomerModule:()=>ye});var s=l(60177),p=l(89417),f=l(345),y=l(25084),x=l(86600),k=l(21626),b=l(41780),C=l(37886),j=l(74054),m=l(38186),u=l(42419),i=l(14304),r=l(73137),g=l(90988),h=l(51188),v=l(18359),O=l(48526);const E={SiteName:{section:"buyer",label:"Customers.Customer.SiteId",name:"siteName",aliasName:"",validatiors:[],type:"ngSelect",placeholder:"Customers.Customer.SelectSiteIdIsRequired",customData:{data:[],key:"storeName",value:"id",disabled:!0}},BuyerGroup:{section:"buyer",label:"Customers.Customer.CustomerGroup",name:"buyerGroup",aliasName:"",validatiors:[p.k0.required],type:"ngSelect",placeholder:"Customers.Customer.SelectCustomerGroup",mandatory:!0,customData:{data:[],key:"name",value:"id"}},BuyerName:{section:"buyer",label:"Sales.Orders.CustomerName",name:"buyerName",aliasName:"",validatiors:[p.k0.required,p.k0.minLength(3),p.k0.maxLength(32),p.k0.pattern(/^[a-zA-Z\s]*$/)],type:"text",placeholder:"Customers.CustomerPlaceholder.CustomerName",mandatory:!0,optionalErrorMessage:{pattern:"ValidationsErrorMessage.Allowonlyalphabetsspaces"}},Email:{section:"buyer",label:"Customers.Customer.Email",name:"email",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(96),p.k0.pattern("^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$")],type:"text",placeholder:"Customers.CustomerPlaceholder.Email",mandatory:!0,optionalErrorMessage:{pattern:"Customers.Error.EmailMustBeAValidEmailAddress"}},Telephone:{section:"buyer",label:"Customers.Customer.Telephone",name:"telephone",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(15)],type:"number",placeholder:"Customers.CustomerPlaceholder.Telephone",mandatory:!0},Password:{section:"moreInfo",label:"Customers.Customer.Password",name:"password",aliasName:"",validatiors:[p.k0.required,p.k0.minLength(8),p.k0.maxLength(50),O.N.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),O.N.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),O.N.patternValidator(/[a-z]/,{hasSmallCase:!0})],type:"password",placeholder:"Customers.CustomerPlaceholder.Password",mandatory:!0,optionalErrorMessage:{hasNumber:"Customers.Error.MustHave1NumberOrSymbol",hasCapitalCase:"Customers.Error.MustContain1CapitalCase",hasSmallCase:"Customers.Error.MustContain1SmallCase"}},ConfirmPassword:{section:"moreInfo",label:"Customers.Customer.ConfirmPassword",name:"confirmPassword",aliasName:"",validatiors:[p.k0.required],type:"password",placeholder:"Customers.Customer.ConfirmPassword",mandatory:!0,optionalErrorMessage:{NoPassswordMatch:"Customers.Error.ConfirmpasswordIsMismatch"}},Status:{section:"moreInfo",label:"Customers.Customer.Status",name:"status",aliasName:"",validatiors:[p.k0.required],type:"ngSelect",placeholder:"Customers.Customer.SelectStatus",customData:{data:[{id:"1",name:"Enabled"},{id:"0",name:"Disabled"}],key:"name",value:"id"},mandatory:!0},MailStatus:{label:"Customers.Customer.MailStatus",name:"mailStatus",aliasName:"",validatiors:[],type:"checkbox",placeholder:"",customStyle:{trow:{class:"check-table"},tbody:{class:"check-table"}}}};var P=l(98852),t=l(54438),N=l(18186);function K(n,c){if(1&n&&(t.j41(0,"div",6),t.nrm(1,"app-common-form",15),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG();t.R7$(),t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("submitted",o.submitted)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)("optionalErrorMessage",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].optionalErrorMessage)("mandatory",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].mandatory)}}function W(n,c){if(1&n&&(t.qex(0),t.DNE(1,K,2,10,"div",14),t.bVm()),2&n){const e=c.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf","buyer"==(null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].section))}}function J(n,c){if(1&n&&(t.j41(0,"div",6),t.nrm(1,"app-common-form",15),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG();t.R7$(),t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("submitted",o.submitted)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)("optionalErrorMessage",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].optionalErrorMessage)("mandatory",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].mandatory)}}function Q(n,c){if(1&n&&(t.qex(0),t.DNE(1,J,2,10,"div",14),t.bVm()),2&n){const e=c.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf","moreInfo"==(null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].section))}}let A=(()=>{class n{constructor(e,o,a,d,_,S){this.route=e,this.router=o,this.fb=a,this.appSandbox=d,this.sandbox=_,this.customerService=S,this.buyerId="",this.dynamicObjControls={},this.submitted=!1,this.paramsValue={},this._Object=Object,this.subscriptions=new v.yU,this.trackByIndex=T=>T,this.buyerId=this.route.snapshot.paramMap.get("id")?this.route.snapshot.paramMap.get("id"):""}ngOnInit(){this.buildForm(),this.SiteIdGroupList(),this.customersGroupList(),this.buyerId&&this.editcustomerinfo(),this.routeSubscribe()}buildForm(){const e=E,o=(0,P.gQ)(e);this.formObjFormGroup=this.fb.group(o,{validators:O.N.passwordMatchValidator}),Object.keys(e).forEach(a=>{this.dynamicObjControls[a]=(0,P.yE)(e[a],this.formObjFormGroup)})}customersGroupList(){this.subscriptions.add(this.customerService.customersGroupList({status:1}).subscribe(e=>{this.dynamicObjControls.BuyerGroup.customData.data=e?.data}))}SiteIdGroupList(){this.subscriptions.add(this.customerService.SiteIdList({status:1}).subscribe(e=>{this.dynamicObjControls.SiteName.customData.data=e?.data,this.formObjFormGroup.controls.siteName.setValue(2)}))}clearPasswordValidation(){this.formObjFormGroup.controls.password.clearValidators(),this.formObjFormGroup.controls.password.updateValueAndValidity(),this.formObjFormGroup.controls.confirmPassword.clearValidators(),this.formObjFormGroup.controls.confirmPassword.updateValueAndValidity()}onSubmit(){if(this.submitted=!0,this.buyerId&&this.clearPasswordValidation(),this.formObjFormGroup.invalid)return void this.scrollToError();const e={};e.customerGroupId=this.formObjFormGroup.value.buyerGroup,e.firstName=this.formObjFormGroup.value.buyerName,e.email=this.formObjFormGroup.value.email.toLowerCase(),e.mobileNumber=this.formObjFormGroup.value.telephone,e.password=this.formObjFormGroup.value.password,e.confirmPassword=this.formObjFormGroup.value.confirmPassword,e.mailStatus=this.formObjFormGroup.value.mailStatus?1:0,e.siteId=this.formObjFormGroup.value.siteName,e.avatar="",e.status=this.formObjFormGroup.value.status,this.buyerId?(e.id=this.buyerId,this.appSandbox.updateCustomers(e)):this.appSandbox.addCustomers(e),this.subscripe()}subscripe(){this.appSandbox.addCustomer$.subscribe(e=>{e&&1===e.status&&this.router.navigate(["/customers/manage-customers/customer"])}),this.appSandbox.updateCustomer$.subscribe(e=>{e&&1===e.status&&this.router.navigate(["/customers/manage-customers/customer"],{queryParams:this.paramsValue})})}cancel(){this.router.navigate(["/customers/manage-customers/customer"],{queryParams:this.paramsValue})}editcustomerinfo(){this.appSandbox.viewCustomerDetail({id:this.buyerId}),this.appSandbox.getDetailCustomer$.subscribe(e=>{e&&Object.keys(e).length&&(this.buyerDetail=e,this.formObjFormGroup.patchValue({siteName:2,buyerGroup:e?.customerGroupId,buyerName:e?.firstName,email:e?.email,telephone:e?.mobileNumber,status:String(e?.isActive),mailStatus:1==e?.mailStatus}))})}ngOnDestroy(){this.subscriptions.unsubscribe()}scrollTo(e){e&&e.scrollIntoView({behavior:"smooth",block:"center"})}scrollToError(){const e=document.querySelector(".ng-invalid[formControlName]");this.scrollTo(e)}routeSubscribe(){this.route.queryParams.subscribe(e=>{this.paramsValue=e})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(h.nX),t.rXU(h.Ix),t.rXU(p.ze),t.rXU(i.C),t.rXU(r.g),t.rXU(g.S))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-add"]],decls:38,vars:28,consts:[[1,"flex","addproduct-wrap"],[1,"card","ap-general"],[1,"ap-header","sub-sub-header"],[1,"ap-body"],[1,"ap-form-row"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ap-body-col"],[1,"form-group",2,"margin-top","30px"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox2","value","check",1,"custom-control-input",2,"cursor","inherit",3,"formControl"],["for","checkbox2",1,"custom-control-label"],[1,"action-button-container","flex"],[1,"button-reg","btn-md","tertiary",3,"click"],[1,"button-reg","btn-md","primary",3,"click"],["class","ap-body-col",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder","submitted","customData","optionalErrorMessage","mandatory"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",3)(10,"div",4),t.DNE(11,W,2,1,"ng-container",5),t.k0s()()(),t.j41(12,"div",1)(13,"div",2)(14,"h3"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"p"),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.j41(20,"div",3)(21,"div",4),t.DNE(22,Q,2,1,"ng-container",5),t.j41(23,"div",6)(24,"div",7)(25,"div",8),t.nrm(26,"input",9),t.j41(27,"label",10),t.EFF(28),t.nI1(29,"translate"),t.k0s()()()()()()()(),t.j41(30,"div",11)(31,"button",12),t.bIt("click",function(){return a.cancel()}),t.EFF(32),t.nI1(33,"translate"),t.k0s(),t.j41(34,"button",13),t.bIt("click",function(){return a.onSubmit()}),t.EFF(35),t.nI1(36,"translate"),t.nI1(37,"translate"),t.k0s()()),2&o&&(t.R7$(4),t.JRh(t.bMT(5,12,"Customers.Customer.CustomerDetails")),t.R7$(3),t.JRh(t.bMT(8,14,"Customers.Customer.enterManageBuyerDetails")),t.R7$(4),t.Y8G("ngForOf",a._Object.keys(a.dynamicObjControls))("ngForTrackBy",a.trackByIndex),t.R7$(4),t.JRh(t.bMT(16,16,"Customers.Customer.MoreInformation")),t.R7$(3),t.JRh(t.bMT(19,18,"Customers.Customer.setBuyerPassword")),t.R7$(4),t.Y8G("ngForOf",a._Object.keys(a.dynamicObjControls))("ngForTrackBy",a.trackByIndex),t.R7$(4),t.Y8G("formControl",null==a.dynamicObjControls.MailStatus?null:a.dynamicObjControls.MailStatus.control),t.R7$(2),t.SpI(" ",t.bMT(29,20,"Customers.Customer.MailStatus")," "),t.R7$(4),t.SpI(" ",t.bMT(33,22,"Customers.Customer.Cancel")," "),t.R7$(3),t.SpI(" ",a.buyerId?t.bMT(36,24,"Customers.Customer.Update"):t.bMT(37,26,"Customers.Customer.Save")," "))},dependencies:[s.Sq,s.bT,p.Zm,p.BC,p.l_,N.V,b.D9],styles:[".was-validated[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:invalid, .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f62d51;padding-right:calc(1.5em + .75rem);background-image:unset;background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.was-validated[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]:invalid, .custom-select.is-invalid[_ngcontent-%COMP%]{border-color:#f62d51;padding-right:calc(.75em + 2.3125rem);background:unset}.dark-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#009efb;color:#fff}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff}.light-blue-backdrop[_ngcontent-%COMP%]{background-color:#5cb3fd}.image-manager[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:70%}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}mat-checkbox-layout[_ngcontent-%COMP%]{margin-bottom:-73px!important;margin-left:-70px!important}.error-field[_ngcontent-%COMP%]{border:1px solid red!important}.fa[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{margin-top:6px}.password-show-hide[_ngcontent-%COMP%]{position:absolute;top:2.1875rem!important;right:.5rem;cursor:pointer}"]})}}return n})();var R=l(55735);const H=[{displayName:"Customers.Customer.Address",id:"name",type:"default",checked:!0},{displayName:"Customers.Customer.City",id:"city",type:"default",checked:!0},{displayName:"Customers.Customer.State",id:"stateName",type:"default",checked:!0},{displayName:"Customers.Customer.phoneNumber",id:"phoneNo",type:"default",checked:!0},{displayName:"Customers.Customer.pinCode",id:"postcode",type:"default",checked:!0},{displayName:"Customers.Customer.AddressType",type:"template",id:"addressType",checked:!0},{displayName:"Customers.Customer.Action",id:"menu",type:"threeDotMenu",checked:!0,menuData:[{name:"Edit",img:"assets/img/edit.svg",displayName:"Customers.Customer.Edit"},{name:"Delete",img:"assets/img/delete-new.svg",displayName:"Customers.Customer.Delete"}]}],w={firstName:{label:"Customers.Customer.FirstName",name:"firstName",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(128),p.k0.pattern(/^[a-zA-Z\s]*$/)],type:"text",mandatory:!0,placeholder:"Customers.Customer.FirstName",optionalErrorMessage:{pattern:"ValidationsErrorMessage.Allowonlyalphabetsspaces"}},lastName:{label:"Customers.Customer.LastName",name:"lastName",aliasName:"",validatiors:[p.k0.pattern(/^[a-zA-Z\s]*$/)],type:"text",placeholder:"Customers.Customer.LastName",optionalErrorMessage:{pattern:"ValidationsErrorMessage.Allowonlyalphabetsspaces"}},phoneNumber:{label:"Customers.Customer.phoneNumber",name:"phoneNumber",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(15)],type:"number",mandatory:!0,placeholder:"Customers.Customer.phoneNumber"},address1:{label:"Customers.Customer.address1Placeholder",name:"address1",aliasName:"",validatiors:[p.k0.required],type:"text",mandatory:!0,placeholder:"Customers.Customer.address1Placeholder"},address2:{label:"Customers.Customer.address2Placeholder",name:"address2",aliasName:"",validatiors:[p.k0.required],type:"text",mandatory:!0,placeholder:"Customers.Customer.address2Placeholder"},landmark:{label:"Customers.Customer.landmark",name:"landmark",aliasName:"",validatiors:[],type:"text",placeholder:"Customers.Customer.landmark"},city:{label:"Customers.Customer.City",name:"city",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(128),p.k0.pattern("[a-zA-Z '-,;.]*")],type:"text",placeholder:"Customers.CustomerPlaceholder.City",mandatory:!0},CountryId:{label:"marketplace.seller.Country",name:"CountryId",aliasName:"",validatiors:[p.k0.required],type:"ngSelect",placeholder:"placeholder.select country",customData:{data:[{}],key:"name",value:"countryId"},mandatory:!0},StateId:{label:"common.State",name:"StateId",aliasName:"",validatiors:[p.k0.required],type:"ngSelect",placeholder:"common.State",customData:{data:[{}],key:"name",value:"zoneId"},mandatory:!0},Pincode:{label:"Customers.Customer.pinCode",name:"pincode",aliasName:"",validatiors:[p.k0.required,p.k0.maxLength(6)],type:"number",placeholder:"Customers.Customer.pinCode",mandatory:!0},AddressType:{label:"Customers.Customer.AddressType",name:"addresstype",aliasName:"",validatiors:[p.k0.required],type:"radio",placeholder:"Customers.CustomerPlaceholder.PostalCode",customData:{data:[{name:"Billing",id:"1",displayName:"Customers.Customer.Billing"},{name:"Shipping",id:"0",displayName:"Customers.Customer.Shipping"}],key:"name",value:"id"},mandatory:!0}};var Z=l(48256),L=l(73857),D=l(34501),V=l(42612),B=l(35697);const q=()=>["buyer-address-list"],tt=n=>({addressType:n});function et(n,c){1&n&&(t.j41(0,"h4",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Customers.Customer.UpdateAddress"),""))}function st(n,c){1&n&&(t.j41(0,"h4",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Customers.Customer.AddAddress"),""))}function ot(n,c){if(1&n&&(t.j41(0,"div")(1,"div",14),t.nrm(2,"app-common-form",15),t.k0s()()),2&n){const e=c.$implicit,o=t.XpG();t.R7$(2),t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("submitted",o.submitted)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)("optionalErrorMessage",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].optionalErrorMessage)("mandatory",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].mandatory)}}function nt(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Customers.Customer.Billing")," "))}function at(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Customers.Customer.Shipping")," "))}function rt(n,c){if(1&n&&t.DNE(0,nt,3,3,"span",12)(1,at,3,3,"span",12),2&n){const e=c.$implicit;t.Y8G("ngIf",1==e.addressType),t.R7$(),t.Y8G("ngIf",0==e.addressType)}}function it(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"app-reusable-pagination",21),t.nI1(2,"async"),t.bIt("pageChange",function(a){t.eBV(e);const d=t.XpG(2);return t.Njj(d.onPageChange(a))}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",t.bMT(2,4,e.sandbox.addressListCount$))("pageSize",e.limit)}}function lt(n,c){if(1&n){const e=t.RV6();t.qex(0),t.nrm(1,"hr"),t.j41(2,"div",16)(3,"div",17)(4,"app-common-table",18),t.bIt("buttonChangeEvent",function(a){t.eBV(e);const d=t.XpG();return t.Njj(d.buttonAction(a))}),t.k0s(),t.DNE(5,rt,2,2,"ng-template",null,0,t.C5r)(7,it,3,6,"div",19),t.nI1(8,"async"),t.k0s()(),t.bVm()}if(2&n){let e;const o=t.sdS(6),a=t.XpG();t.R7$(4),t.Y8G("customTemplate",t.eq3(7,tt,o))("HeadArray",a.customTable)("GridArray",a.addressList)("selectAll",a.tableCheckbox),t.R7$(3),t.Y8G("ngIf",(null==(e=t.bMT(8,5,a.sandbox.addAddressList$))?null:e.length)>10)}}let ct=(()=>{class n{constructor(e,o,a,d,_,S,T){this.modalService=e,this.fb=o,this.sandbox=a,this.modal=d,this.toastr=_,this.sellerSandbox=S,this.translate=T,this.currentPage=1,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.offset=0,this.customTable=H,this.dynamicObjControls={},this.submitted=!1,this._Object=Object,this.subscriptions=new v.yU,this.trackByIndex=F=>F,this.addressList=[]}ngOnInit(){this.buildForm(),this.formValueChanges(),this.getAddAddressList(),this.getCountryList()}formValueChanges(){this.formObjFormGroup.controls.CountryId.valueChanges.subscribe(e=>{e&&(this.formObjFormGroup.controls.StateId.reset(),this.getStateList(e))})}getStateList(e){this.sellerSandbox.stateList({countryId:e}),this.subscriptions.add(this.sellerSandbox.stateList$.subscribe(o=>{o&&(w.StateId.customData.data=o)}))}onSubmit(){if(this.submitted=!0,this.formObjFormGroup.invalid)return;const e={};e.firstName=this.formObjFormGroup.value.firstName,e.lastName=this.formObjFormGroup.value.lastName,e.phoneNumber=this.formObjFormGroup.value.phoneNumber,e.address1=this.formObjFormGroup.value.address1,e.address2=this.formObjFormGroup.value.address2,e.landmark=this.formObjFormGroup.value.landmark,e.city=this.formObjFormGroup.value.city,e.countryId=this.formObjFormGroup.value.CountryId,e.postcode=this.formObjFormGroup.value.pincode,e.addressType=this.formObjFormGroup.value.addresstype,e.company=this.formObjFormGroup.value.firstName,e.zoneId=this.formObjFormGroup.value.StateId,e.customerId=this.customerId,this.addressId?(e.addressId=this.addressId,this.sandbox.updateAddressAdd(e),this.sandbox.addAddressUpdate$.subscribe(o=>{1==o?.status&&(this.formObjFormGroup.reset(),this.resetAll(),this.addressId=null,this.submitted=!1)})):(this.sandbox.addAddressAdd(e),this.sandbox.addAddressAdd$.subscribe(o=>{1==o?.status&&(this.formObjFormGroup.reset(),this.resetAll(),this.submitted=!1)}))}resetAll(){this.onPageChange({limit:this.limit,offset:0}),this.getAddAddressList()}buttonAction(e){"threeDotMenu"===e.key&&("Edit"==e.actionType?this.editAddress(e):this.delete(e))}delete(e){const o=this.modalService.open(R.i,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});o.componentInstance.key="",o.componentInstance.id="",o.result.then(a=>{"deleted"===a&&(this.sandbox.deleteAddressAdd({addressId:e.addressId}),this.sandbox.deleteAddAddress$.subscribe(d=>{1==d?.status&&this.getAddAddressList()}))})}getCountryList(){this.sellerSandbox.getCountriesList({status:1}),this.subscriptions.add(this.sellerSandbox.getCountryList$.subscribe(o=>{o&&(w.CountryId.customData.data=o)}))}getAddAddressList(){this.offset=(this.currentPage-1)*this.limit;const e={};e.limit=this.limit,e.offset=this.offset,e.customerId=this.customerId,this.sandbox.addAddressList(e),this.sandbox.addAddressList$.subscribe(o=>{o&&(o?.data.forEach(a=>{a.name=a.firstName+" "+a.lastName,a.stateName=a?.zone?.name}),this.addressList=o?.data)}),e.count="true",this.sandbox.addAddresspagination(e)}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getAddAddressList()}editAddress(e){this.formObjFormGroup.patchValue({firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNo,CountryId:e.countryId,address1:e.address1,address2:e.address2,landmark:e.landmark,city:e.city,StateId:e?.zoneId?e?.zoneId:+e.state,pincode:e.postcode,name:e.company,addresstype:String(e.addressType)}),this.addressId=e.addressId}buildForm(){const e=w,o=(0,P.gQ)(e);this.formObjFormGroup=this.fb.group(o),Object.keys(e).forEach(a=>{this.dynamicObjControls[a]=(0,P.yE)(e[a],this.formObjFormGroup)})}close(){this.subscriptions.unsubscribe(),this.modal.close()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(C.Bq),t.rXU(p.ze),t.rXU(i.C),t.rXU(C.Lw),t.rXU(Z.tw),t.rXU(L.f),t.rXU(b.c$))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-address"]],decls:16,vars:12,consts:[["itemTemplateRef",""],[1,"address",2,"background","#fff"],[1,"modal-header"],["class","modal-header__title","id","modal-basic-title",4,"ngIf"],["type","button","aria-label","Close",1,"bton","close-modal",3,"click"],["src","assets/img/modal-close.svg","alt",""],[1,"modal-body"],[1,"row"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-12"],[1,"modal-action-btns","flex"],["appShowHide","","type","submit",3,"click","hideUnAuthorized"],[4,"ngIf"],["id","modal-basic-title",1,"modal-header__title"],[1,"col-lg-6","col-xs-12"],[3,"type","control","label","inputId","aliasName","placeholder","submitted","customData","optionalErrorMessage","mandatory"],[1,"product-table"],[1,""],[3,"buttonChangeEvent","customTemplate","HeadArray","GridArray","selectAll"],["class","pagination flex",4,"ngIf"],[1,"pagination","flex"],[3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(o,a){1&o&&(t.j41(0,"div",1)(1,"div",2),t.DNE(2,et,3,3,"h4",3)(3,st,3,3,"h4",3),t.j41(4,"button",4),t.bIt("click",function(){return a.close()}),t.nrm(5,"img",5),t.k0s()(),t.j41(6,"div",6)(7,"div",7),t.DNE(8,ot,3,10,"div",8),t.j41(9,"div",9)(10,"div",10)(11,"button",11),t.bIt("click",function(){return a.onSubmit()}),t.EFF(12),t.nI1(13,"translate"),t.nI1(14,"translate"),t.k0s()()()(),t.DNE(15,lt,9,9,"ng-container",12),t.k0s()()),2&o&&(t.R7$(2),t.Y8G("ngIf",a.addressId),t.R7$(),t.Y8G("ngIf",!a.addressId),t.R7$(5),t.Y8G("ngForOf",a._Object.keys(a.dynamicObjControls))("ngForTrackBy",a.trackByIndex),t.R7$(3),t.Y8G("hideUnAuthorized",t.lJ4(11,q)),t.R7$(),t.JRh(a.addressId?t.bMT(13,7,"Customers.Customer.UpdateAddress"):t.bMT(14,9,"Customers.Customer.AddAddress")),t.R7$(3),t.Y8G("ngIf",(null==a.addressList?null:a.addressList.length)>0))},dependencies:[s.Sq,s.bT,D.$,V.V,N.V,B.D,s.Jj,b.D9],styles:[".row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}@media (min-width: 992px){.col-lg-6[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}}"]})}}return n})();var mt=l(70524),$=l(64363);const X=()=>{const n=(0,$.ZQ)();return[{displayName:"",id:"id",type:"checkBox",checked:!0,isEnableSelectall:!0,customStyle:{trow:{class:"check-table"},tbody:{class:"check-table"}}},{displayName:"Customers.Customer.CustomerName",id:"detail",type:"template",checked:!0,customStyle:{tbody:{class:"fw-semibold text-capitalize"}}},{displayName:"Customers.Customer.E-mailId",id:"email",type:"default",checked:!0},{displayName:"Customers.Customer.Group",id:"customerGroupName",type:"default",checked:!0},{displayName:"Customers.Customer.DateAdded",id:"createdDate",type:"date",checked:!0},{displayName:"Customers.Customer.Address",type:"template",id:"address",isDisable:!n["buyer-address-list"],key:"checkBox",checked:!0,customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"marketplace.common.Status",id:"status",type:"template",checked:!0,customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"marketplace.common.Action",id:"menu",type:"threeDotMenu",isDisable:!n["update-buyer"]&&!n["delete-buyer"],checked:!0,customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}},menuData:[{name:"Edit",img:"assets/img/edit.svg",displayName:"marketplace.seller.Edit",isDisable:!n["update-buyer"]},{name:"Delete",img:"assets/img/delete-new.svg",displayName:"marketplace.seller.Delete",isDisable:!n["delete-buyer"]}]}]},U={BuyerName:{label:"Customers.Customer.CustomerName",name:"Buyer Name",aliasName:"",validatiors:[],type:"text",placeholder:"Customers.Customer.EnterTheBuyername"},Email:{label:"Customers.Customer.E-mailId",name:"Email ID",aliasName:"",validatiors:[],type:"text",placeholder:"Customers.Customer.EntertheEmailId"},Status:{label:"Customers.Customer.Status",name:"status",aliasName:"",validatiors:[],type:"ngSelect",placeholder:"marketplace.common.Selectthestatus",customData:{data:[{name:"Active",id:"1"},{name:"In-Active",id:"0"}],key:"name",value:"id"}},Date:{label:"Customers.Customer.DateAdded",name:"Date",aliasName:"",validatiors:[],type:"date",placeholder:"Customers.Customer.DD/MM/YEAR"},BuyerGroup:{label:"Customers.Customer.CustomerGroup",name:"Buyer Group",aliasName:"",validatiors:[],type:"ngSelect",placeholder:"marketplace.common.Selectthestatus",customData:{data:[{}],key:"name",value:"id"}},Search:{label:"marketplace.common.Search",name:"search",aliasName:"",validatiors:[],type:"text",placeholder:"marketplace.common.Search"}},ut={1:{text:"common.Active",class:"active"},0:{text:"common.In-Active",class:"inactive"}},dt=(0,$.ZQ)(),pt=["itemSelected","exportExcel","exportExcelAll","delete","resetCheckbox"].filter(n=>{switch(n){case"exportExcel":return["exportExcel"];case"exportExcelAll":return["exportExcelAll"];case"delete":return dt["delete-buyer"];case"resetCheckbox":return["resetCheckbox"];default:return!0}}),gt=(0,mt.L)(pt);function Y(n){for(const c in n)n.hasOwnProperty(c)&&(null==n[c]||""===n[c])&&delete n[c];return n}var z=l(74937),ht=l(52609),bt=l(87277);const ft=["myDropdown"],Ct=["myInput"],_t=(n,c,e)=>({address:n,detail:c,status:e});function yt(n,c){1&n&&(t.j41(0,"div",33),t.nrm(1,"img",34),t.k0s())}function vt(n,c){if(1&n&&(t.qex(0),t.EFF(1),t.nI1(2,"date"),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.value,"dd/MM/YYYY")," ")}}function It(n,c){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",1==e.value?"Active":"In-active"," ")}}function kt(n,c){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",e.buyerGroupName," ")}}function jt(n,c){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function Ot(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",37)(1,"span"),t.EFF(2),t.k0s(),t.qex(3,38),t.DNE(4,vt,3,4,"ng-container",39)(5,It,2,1,"ng-container",39)(6,kt,2,1,"ng-container",39)(7,jt,2,1,"ng-container",40),t.bVm(),t.j41(8,"button",41),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,d=t.XpG();return t.Njj(d.removeFilter(a))}),t.nrm(9,"img",42),t.k0s()()}if(2&n){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.Y8G("ngSwitch",e.key),t.R7$(),t.Y8G("ngSwitchCase","Date"),t.R7$(),t.Y8G("ngSwitchCase","status"),t.R7$(),t.Y8G("ngSwitchCase","Buyer Group")}}function xt(n,c){if(1&n&&(t.j41(0,"div",35),t.DNE(1,Ot,10,5,"div",36),t.k0s()),2&n){const e=c.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.empty.includes(e.value))}}function Pt(n,c){if(1&n&&t.nrm(0,"app-common-form",44),2&n){const e=t.XpG().$implicit,o=t.XpG();t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)}}function St(n,c){if(1&n&&(t.j41(0,"div"),t.DNE(1,Pt,1,7,"app-common-form",43),t.k0s()),2&n){const e=c.$implicit;t.R7$(),t.Y8G("ngIf","Search"!==e)}}function Et(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.addCustomer())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.Y8G("hideUnAuthorized","create-buyer"),t.R7$(),t.SpI(" + ",t.bMT(2,2,"Customers.Customer.AddCustomer")," "))}function Mt(n,c){if(1&n){const e=t.RV6();t.j41(0,"a",46),t.bIt("click",function(){const a=t.eBV(e).$implicit,d=t.XpG();return t.Njj(d.addAddress(a.id))}),t.nrm(1,"img",47),t.EFF(2," Address "),t.k0s()}}function Tt(n,c){if(1&n){const e=t.RV6();t.j41(0,"span",48),t.bIt("click",function(){const a=t.eBV(e).$implicit,d=t.XpG();return t.Njj(d.viewcustomer(a.id,a))}),t.EFF(1),t.k0s()}if(2&n){const e=c.$implicit;t.R7$(),t.SpI(" ",e.firstName+e.lastName?e.firstName:"-"," ")}}function Ft(n,c){if(1&n&&t.nrm(0,"app-common-badge",49),2&n){const e=c.$implicit,o=t.XpG();t.Y8G("badge",o.badgeStatusMappings.hasOwnProperty(e.isActive)?o.badgeStatusMappings[e.isActive]:"")}}function Gt(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",50)(1,"span"),t.nrm(2,"img",51),t.k0s(),t.j41(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",52),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.addCustomer())}),t.EFF(7),t.nI1(8,"translate"),t.k0s()()}2&n&&(t.R7$(4),t.JRh(t.bMT(5,2,"Settings.data.DataNotFound")),t.R7$(3),t.SpI(" ",t.bMT(8,4,"Customers.Customer.AddCustomer")," "))}function Nt(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",53)(1,"app-reusable-pagination",54),t.nI1(2,"async"),t.bIt("pageChange",function(a){t.eBV(e);const d=t.XpG();return t.Njj(d.onPageChange(a))}),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",t.bMT(2,4,e.sandbox.customerListCount$).data)("pageSize",e.limit)}}function Rt(n,c){if(1&n){const e=t.RV6();t.j41(0,"app-bulk-action",55),t.bIt("actionEvent",function(a){t.eBV(e);const d=t.XpG();return t.Njj(d.actionType(a))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("count",null==e.selectedDatas?null:e.selectedDatas.length)("bulkList",e.bulkAction)}}let wt=(()=>{class n{constructor(e,o,a,d,_,S,T,F,ve,Ie){this.sandbox=e,this.modalService=o,this.router=a,this.CustomersGroupservice=d,this.service=_,this.route=S,this.titleservice=T,this.fb=F,this.datePipe=ve,this.ref=Ie,this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this.badgeStatusMappings=ut,this.bulkAction=gt,this._Object=Object,this.empty=[null,"",void 0],this.selectedDatas=[],this.selectedAll=!1,this.tableCheckbox={isSelectAll:!1},this.customTable=X,this.buyerGroup=[],this.queryData={},this.title="Buyer",this.currentPage=1,this.offset=0,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.subscriptions=new v.yU,this.trackByIndex=ke=>ke}ngOnInit(){this.titleservice.setTitle(this.title),this.customTable=X(),this.viewDeatilsPermission=$.aI["view-buyer"],this.buildForm(),this.routeSubscribe(),this.customersGroupList()}subscribeCustomer(){this.subscriptions.add(this.sandbox.customerList$.subscribe(e=>{this.customerListArray=[],e&&e.length>0&&(this.customerListArray=e.map(o=>({...o,selected:!1})))}))}buttonAction(e){switch(e.key){case"checkBox":this.selectedDatas=e.selectedDatas;break;case"threeDotMenu":"Edit"==e.actionType?this.editcustomer(e):this.deleteCustomer(e)}}reset(e=!1){this.customerListArray.forEach(o=>o.checked=e),this.selectedDatas=this.customerListArray.filter(o=>o?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}resetAll(){this.onPageChange({limit:this.limit,offset:0}),this.customerListCount(),this.dropDownClose("myDropdown")}applyFilter(){this.filterValueUpdate(),this.resetAll()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({search:"","Buyer Name":"","Email ID":"",status:"",Date:"","Buyer Group":""}),this.filterValueUpdate(),this.resetAll()}addAddress(e){this.modalService.open(ct,{windowClass:"view-address",modalDialogClass:"modal-dialog-centered"}).componentInstance.customerId=e}viewcustomer(e,o){this.router.navigate(["customers/manage-customers/customer/view",e],{queryParams:o})}addCustomer(){this.service.setcusteditdata(""),this.router.navigate(["/customers/manage-customers/customer/add"],{queryParams:this.queryData})}editcustomer(e){this.router.navigate(["/customers/manage-customers/customer/edit",e.id],{queryParams:this.getQueryParam()})}customerList(){this.offset=(this.currentPage-1)*this.limit;let e=Y(this.getQueryParam());e.count=0,e.approvalFlag=1,e.date=this.datePipe.transform(this.backupFormValue.Date,"yyyy-MM-dd")??"",this.sandbox.customerList(e),this.subscribeCustomer(),this.updateQueryParam()}customerListCount(){this.offset=(this.currentPage-1)*this.limit;const e=Y(this.getQueryParam());e.count=1,e.approvalFlag=1,e.date=this.datePipe.transform(this.backupFormValue.Date,"yyyy-MM-dd")??"",this.sandbox.paginationCustomer(e),this.sandbox.customerListCount$.subscribe(o=>{o&&(this.customerCount=o?.data,this.ref.detectChanges())})}customersGroupList(){this.CustomersGroupservice.customersGroupList({limit:0,offset:0,keyword:"",count:0}).subscribe(o=>{null!=o&&(this.buyerGroup=o.data,U.BuyerGroup.customData.data=o.data)})}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.customerList()}deleteCustomer(e){const o=this.modalService.open(R.i,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});o.componentInstance.key="",o.componentInstance.id="",o.componentInstance.deleteMessage="Buyer",o.result.then(a=>{"deleted"===a&&(this.sandbox.deleteCustomers({customerId:e.id}),this.sandbox.deleteCustomer$.subscribe(d=>{1==d?.status&&this.routeSubscribe()}))})}bulkDelete(){const e=this.modalService.open(R.i,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});e.componentInstance.key="",e.componentInstance.id="",e.componentInstance.deleteMessage=this.selectedDatas?.length>1?"Buyers":"Buyer",e.result.then(o=>{if("deleted"===o){const a={};a.customerId=this.selectedDatas.map(d=>d?.id).toString(),this.sandbox.bulkDelete(a),this.subscriptions.add(this.sandbox.deleteCustomer$.subscribe(d=>{d&&1===d.status&&(this.selectedDatas=[],this.selectedAll=!1,this.customerList(),this.customerListCount())}))}})}exportAllExcel(){this.sandbox.customerAllExcel({customerId:""})}exportExcel(){const e={customerId:this.selectedDatas.map(o=>o?.id).toString()};this.sandbox.customerExcel(e)}actionType(e){switch(e){case"resetCheckbox":this.resetCheckbox();break;case"exportExcel":this.exportExcel();break;case"exportExcelAll":this.exportAllExcel();break;case"delete":this.bulkDelete()}}focusInput(){this.myInput.nativeElement.focus()}buildForm(){const e=U,o=(0,P.gQ)(e);this.formObjFormGroup=this.fb.group(o),Object.keys(e).forEach(a=>{this.dynamicObjControls[a]=(0,P.yE)(e[a],this.formObjFormGroup)}),this.filterValueUpdate()}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}getQueryParam(){return{limit:this.limit,offset:this.offset,keyword:this.backupFormValue.search??"",name:this.backupFormValue["Buyer Name"]??"",email:this.backupFormValue["Email ID"]??"",status:this.backupFormValue.status?this.backupFormValue.status:"",customerGroup:this.backupFormValue?.["Buyer Group"]??""}}filterValueUpdate(){const e=this.buyerGroup.find(o=>o.id==this.backupFormValue?.["Buyer Group"]);e&&(this.buyerGroupName=e.name),this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.formValueExists=Object.values(this.backupFormValue).some(o=>!this.empty.includes(o))}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(o=>{e=o,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.offset&&e.limit?Math.floor(e.offset/e.limit)+1:1,this.formObjFormGroup.patchValue({"Buyer Name":e.name??"","Email ID":e.email??"",status:e.status?e.status:null,Date:e.date?new Date(e.date):"","Buyer Group":e.customerGroup?+e.customerGroup:null,search:e.keyword??""}),this.filterValueUpdate()})),this.customerList(),this.customerListCount()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(i.C),t.rXU(C.Bq),t.rXU(h.Ix),t.rXU(g.S),t.rXU(m._),t.rXU(h.nX),t.rXU(f.hE),t.rXU(p.ze),t.rXU(s.vh),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-list"]],viewQuery:function(o,a){if(1&o&&(t.GBs(ft,5),t.GBs(Ct,5)),2&o){let d;t.mGM(d=t.lsd())&&(a.myDropdown=d.first),t.mGM(d=t.lsd())&&(a.myInput=d.first)}},decls:54,vars:53,consts:[["myDropdown","ngbDropdown"],["itemTemplateRef",""],["itemTemplateRefDetail",""],["itemTemplateRefStatus",""],["class","loading-data",4,"ngIf"],[1,"flex","filter-row",3,"keyup.Tab"],[1,"filter-lft"],[1,"filter-rht","flex"],["class","added-filter flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-search"],[1,"",3,"keyup.enter"],[1,"input-group"],[1,"ig-row"],[3,"type","control","label","inputId","aliasName","placeholder"],["ngbDropdown","",1,"dropdown","filter-dropdown",3,"autoClose"],["ngbDropdownToggle","",1,"button-reg","tertiary","btn-sm"],["src","assets/img/filter.svg","alt",""],["ngbDropdownMenu","","data-popper-placement","bottom-end",1,"dropdown-menu","dropdown-menu-end"],[1,"filter-form"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-btn","flex"],["type","submit",1,"button-reg","btn-sm","primary",3,"click"],[1,"button-reg","btn-sm","tertiary",3,"click"],["class","button-reg primary btn-sm","appShowHide","",3,"hideUnAuthorized","click",4,"ngIf"],[1,"flex","product-wrap","example-full-width",3,"keyup.Tab"],[1,"product-table"],[1,"spinner-wrapper"],[2,"transform","translate(38%, 50%)","position","absolute",3,"isShow"],[1,"table-responsive"],[3,"buttonChangeEvent","customTemplate","HeadArray","GridArray","selectAll"],["class","nodata-found",4,"ngIf"],["class","pagination flex",4,"ngIf"],[3,"count","bulkList","actionEvent",4,"ngIf"],[1,"loading-data"],["src","./assets/loader/Spurt-commerce-Loader-2.1.gif",2,"height","10vh"],[1,"added-filter","flex"],["class","added-filter-col flex filter-detail",4,"ngIf"],[1,"added-filter-col","flex","filter-detail"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"click"],["src","assets/img/close.svg","alt",""],[3,"type","control","label","inputId","aliasName","placeholder","customData",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder","customData"],["appShowHide","",1,"button-reg","primary","btn-sm",3,"click","hideUnAuthorized"],["href","javascript:void(0)",1,"link-text",3,"click"],["src","assets/imgs/address.svg","alt",""],[1,"text-center",2,"cursor","pointer",3,"click"],[3,"badge"],[1,"nodata-found"],["src","assets/imgs/nodatafound.svg","alt",""],[1,"button-reg","btn-sm","primary",3,"click"],[1,"pagination","flex"],[3,"pageChange","type","currentPage","totalItems","pageSize"],[3,"actionEvent","count","bulkList"]],template:function(o,a){if(1&o){const d=t.RV6();t.DNE(0,yt,2,0,"div",4),t.nI1(1,"async"),t.j41(2,"div",5),t.bIt("keyup.Tab",function(){return t.eBV(d),t.Njj(a.focusInput())}),t.j41(3,"div",6)(4,"h2"),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.j41(7,"div",7),t.DNE(8,xt,2,1,"div",8),t.nI1(9,"keyvalue"),t.j41(10,"div",9)(11,"form",10),t.bIt("keyup.enter",function(){return t.eBV(d),t.Njj(a.applyFilter())}),t.j41(12,"div",11)(13,"div",12),t.nrm(14,"app-common-form",13),t.k0s()()()(),t.j41(15,"div",14,0)(17,"button",15),t.nrm(18,"img",16),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",17)(22,"h4"),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"form",18),t.DNE(26,St,2,1,"div",19),t.j41(27,"div",20)(28,"button",21),t.bIt("click",function(){return t.eBV(d),t.Njj(a.applyFilter())}),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.j41(31,"button",22),t.bIt("click",function(){return t.eBV(d),t.Njj(a.filterReset(""))}),t.EFF(32),t.nI1(33,"translate"),t.k0s()()()()(),t.DNE(34,Et,3,4,"button",23),t.nI1(35,"async"),t.k0s()(),t.j41(36,"div",24),t.bIt("keyup.Tab",function(){return t.eBV(d),t.Njj(a.focusInput())}),t.j41(37,"div",25)(38,"div",26),t.nrm(39,"app-global-loader",27),t.nI1(40,"async"),t.k0s(),t.j41(41,"div",28)(42,"app-common-table",29),t.bIt("buttonChangeEvent",function(S){return t.eBV(d),t.Njj(a.buttonAction(S))}),t.k0s(),t.DNE(43,Mt,3,0,"ng-template",null,1,t.C5r)(45,Tt,2,1,"ng-template",null,2,t.C5r)(47,Ft,1,1,"ng-template",null,3,t.C5r),t.k0s(),t.DNE(49,Gt,9,6,"div",30),t.nI1(50,"async"),t.DNE(51,Nt,3,6,"div",31),t.nI1(52,"async"),t.k0s(),t.DNE(53,Rt,1,2,"app-bulk-action",32),t.k0s()}if(2&o){let d,_;const S=t.sdS(44),T=t.sdS(46),F=t.sdS(48);t.Y8G("ngIf",t.bMT(1,27,a.sandbox.exportExcelLoading)),t.R7$(5),t.Lme("",t.bMT(6,29,"Customers.Customer.Customer")," (",a.customerCount,")"),t.R7$(3),t.Y8G("ngForOf",t.bMT(9,31,a.backupFormValue))("ngForTrackBy",a.trackByIndex),t.R7$(6),t.Y8G("type",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.type)("control",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.control)("label",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.label)("inputId",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.inputId)("aliasName",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.aliasName)("placeholder",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("autoClose",!1),t.R7$(4),t.SpI(" ",t.bMT(20,33,"marketplace.common.Filters")," "),t.R7$(4),t.SpI(" ",t.bMT(24,35,"marketplace.common.QuickFilter")," "),t.R7$(3),t.Y8G("ngForOf",a._Object.keys(a.dynamicObjControls))("ngForTrackBy",a.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(30,37,"Customers.Customer.ApplyFilters")," "),t.R7$(3),t.SpI(" ",t.bMT(33,39,"Customers.Customer.Reset")," "),t.R7$(2),t.Y8G("ngIf",(null==(d=t.bMT(35,41,a.sandbox.customerList$))?null:d.length)>0),t.R7$(5),t.Y8G("isShow",t.bMT(40,43,a.sandbox.listLoading$)),t.R7$(3),t.Y8G("customTemplate",t.sMw(49,_t,S,T,F))("HeadArray",a.customTable)("GridArray",a.customerListArray)("selectAll",a.tableCheckbox),t.R7$(7),t.Y8G("ngIf",0==(null==(_=t.bMT(50,45,a.sandbox.customerList$))?null:_.length)),t.R7$(2),t.Y8G("ngIf",!t.bMT(52,47,a.sandbox.exportExcelLoading)&&a.customerCount>a.limit),t.R7$(2),t.Y8G("ngIf",(null==a.selectedDatas?null:a.selectedDatas.length)>0)}},dependencies:[s.Sq,s.bT,s.ux,s.e1,s.fG,C.tg,C.do,C.U0,p.qT,p.cb,p.cV,D.$,z.q,V.V,N.V,ht.S,bt.C,B.D,s.Jj,s.vh,s.lG,b.D9],styles:[".card[_ngcontent-%COMP%]{width:100%}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none!important}.form-group[_ngcontent-%COMP%]{margin-bottom:.4rem;margin-top:.5rem}.name[_ngcontent-%COMP%]{font-weight:700;font-size:13px!important;text-align:left;cursor:pointer}.margin[_ngcontent-%COMP%]{margin-top:-6px;margin-bottom:10px}.product-wrap[_ngcontent-%COMP%]   .product-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{top:0}.custom-control-input[_ngcontent-%COMP%]:focus ~ .custom-control-label[_ngcontent-%COMP%]:before{box-shadow:unset!important}.custom-control-label[_ngcontent-%COMP%]{cursor:pointer!important}th[_ngcontent-%COMP%]{color:#525252}.layout-mar[_ngcontent-%COMP%]{margin-top:58px}.mar[_ngcontent-%COMP%]{margin-top:-15px}.Artboard-1[_ngcontent-%COMP%]{width:91px;height:83px;background-color:#fff}.body[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]     .dropdown-item.active, .dropdown-item[_ngcontent-%COMP%]:active{color:#000!important;text-decoration:none!important;background-color:#fff!important}.table-responsive[_ngcontent-%COMP%]{overflow-x:unset!important}.lst-xpnd[_ngcontent-%COMP%]{position:absolute;right:0}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:130px}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}.view[_ngcontent-%COMP%]{cursor:pointer;position:relative}"]})}}return n})();var Dt=l(61005),$t=l(14823),At=l(87327);function Lt(n,c){1&n&&(t.j41(0,"div",22),t.nrm(1,"img",23),t.k0s())}function Vt(n,c){if(1&n&&(t.j41(0,"div",22),t.nrm(1,"img",24),t.k0s()),2&n){const e=t.XpG().ngIf,o=t.XpG();t.R7$(),t.Y8G("src",o.imageUrl+"?path="+e.avatarPath+"&name="+e.avatar+"&width=100&height=100",t.B4B)("alt",e.avatar)}}function Bt(n,c){if(1&n&&(t.j41(0,"span",37),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.FS9("matTooltip",e.productName),t.R7$(),t.SpI(" ",e.truncatedText,"... ")}}function Xt(n,c){if(1&n&&t.EFF(0),2&n){const e=t.XpG().$implicit;t.SpI(" ",e.productName," ")}}function Ut(n,c){if(1&n&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"img",35),t.k0s(),t.j41(3,"td")(4,"div"),t.DNE(5,Bt,2,2,"span",36)(6,Xt,1,1,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"dynamicDate"),t.k0s()()),2&n){const e=c.$implicit,o=t.sdS(7),a=t.XpG(5);t.R7$(2),t.Y8G("src",a.imageUrl+"?path="+e.containerName+"&name="+e.image+"&width=100&height=100",t.B4B)("alt",e.productName),t.R7$(3),t.Y8G("ngIf",(null==e.productName?null:e.productName.length)>80)("ngIfElse",o),t.R7$(4),t.JRh(t.i5U(10,5,e.createdDate,"MMM d, y, h:mm a"))}}function Yt(n,c){if(1&n&&(t.j41(0,"table",32)(1,"thead")(2,"tr")(3,"th"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th",33),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s()()(),t.j41(12,"tbody"),t.DNE(13,Ut,11,8,"tr",34),t.k0s()()),2&n){const e=t.XpG(2).ngIf;t.R7$(4),t.JRh(t.bMT(5,4,"Customers.Customer.ProductImage")),t.R7$(3),t.JRh(t.bMT(8,6,"Sales.Orders.ProductName")),t.R7$(3),t.JRh(t.bMT(11,8,"Customers.Customer.ViewedDate")),t.R7$(3),t.Y8G("ngForOf",e)}}function zt(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",38)(1,"app-reusable-pagination",39),t.nI1(2,"async"),t.bIt("pageChange",function(a){t.eBV(e);const d=t.XpG(4);return t.Njj(d.onPageChange(a))}),t.k0s()()}if(2&n){const e=t.XpG(4);t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",t.bMT(2,4,e.sandbox.viewCustomerProductCount$))("pageSize",e.pageSize)}}function Kt(n,c){if(1&n&&(t.j41(0,"div",29),t.DNE(1,Yt,14,10,"table",30)(2,zt,3,6,"div",31),t.nI1(3,"async"),t.k0s()),2&n){const e=t.XpG().ngIf,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",(null==e?null:e.length)>0),t.R7$(),t.Y8G("ngIf",t.bMT(3,2,o.sandbox.viewCustomerProductCount$)>o.pageSize)}}function Wt(n,c){1&n&&(t.j41(0,"div",40)(1,"span"),t.nrm(2,"img",41),t.k0s(),t.j41(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&n&&(t.R7$(4),t.JRh(t.bMT(5,1,"Customers.Customer.NoProductsViewed")))}function Jt(n,c){if(1&n&&(t.j41(0,"div",25)(1,"div",10)(2,"h4",26),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,Kt,4,4,"div",27)(6,Wt,6,3,"div",28),t.k0s(),t.nrm(7,"div",17),t.k0s()),2&n){const e=c.ngIf;t.R7$(3),t.JRh(t.bMT(4,3,"Dashboard.Viewproduct")),t.R7$(2),t.Y8G("ngIf",e.length>0),t.R7$(),t.Y8G("ngIf",0===e.length)}}function Qt(n,c){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",t.bMT(2,1,e.sandbox.viewOrderProductCount$)," ")}}function Ht(n,c){if(1&n&&(t.j41(0,"span",37),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.FS9("matTooltip",e.productName),t.R7$(),t.SpI(" ",e.truncatedText,"... ")}}function Zt(n,c){if(1&n&&t.EFF(0),2&n){const e=t.XpG().$implicit;t.SpI(" ",e.productName," ")}}function qt(n,c){if(1&n&&(t.j41(0,"li"),t.nrm(1,"img",24),t.j41(2,"div",45)(3,"h5")(4,"div"),t.DNE(5,Ht,2,2,"span",36)(6,Zt,1,1,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"dynamicDate"),t.k0s()()()),2&n){const e=c.$implicit,o=t.sdS(7),a=t.XpG(4);t.R7$(),t.Y8G("src",a.imageUrl+"?path="+e.containerName+"&name="+e.image+"&width=60&height=60",t.B4B)("alt",e.productName),t.R7$(4),t.Y8G("ngIf",(null==e.productName?null:e.productName.length)>50)("ngIfElse",o),t.R7$(4),t.JRh(t.i5U(10,5,e.createdDate,"MMM d, y, h:mm:ss a"))}}function te(n,c){if(1&n&&(t.j41(0,"ul",1),t.DNE(1,qt,11,8,"li",34),t.k0s()),2&n){const e=t.XpG().ngIf;t.R7$(),t.Y8G("ngForOf",e)}}function ee(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",38)(1,"app-reusable-pagination",46),t.nI1(2,"async"),t.bIt("pageChange",function(a){t.eBV(e);const d=t.XpG(3);return t.Njj(d.onPageChange2(a))}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage2)("totalItems",t.bMT(2,4,e.sandbox.viewOrderProductCount$))("pageSize",e.pageSize2)}}function se(n,c){1&n&&(t.j41(0,"div",40)(1,"span"),t.nrm(2,"img",41),t.k0s(),t.j41(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&n&&(t.R7$(4),t.JRh(t.bMT(5,1,"Customers.Customer.NoProductsOrdered")))}function oe(n,c){if(1&n&&(t.j41(0,"div",42)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.DNE(4,Qt,3,3,"span",43),t.nI1(5,"async"),t.k0s(),t.DNE(6,te,2,1,"ul",44)(7,ee,3,6,"div",31),t.nI1(8,"async"),t.DNE(9,se,6,3,"div",28),t.k0s()),2&n){const e=c.ngIf,o=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,5,"Customers.Customer.OrderProducts")," "),t.R7$(2),t.Y8G("ngIf",t.bMT(5,7,o.sandbox.viewOrderProductCount$)>0),t.R7$(2),t.Y8G("ngIf",e.length>0),t.R7$(),t.Y8G("ngIf",t.bMT(8,9,o.sandbox.viewOrderProductCount$)>o.pageSize2),t.R7$(2),t.Y8G("ngIf",0===e.length)}}function ne(n,c){if(1&n&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"a",8),t.nrm(4,"img",9),t.k0s(),t.j41(5,"div",10),t.DNE(6,Lt,2,0,"div",11)(7,Vt,2,2,"div",11),t.j41(8,"div",12)(9,"h3"),t.EFF(10),t.k0s(),t.j41(11,"p")(12,"span"),t.nrm(13,"img",13),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"p",14)(16,"span"),t.nrm(17,"img",15),t.k0s(),t.EFF(18),t.k0s(),t.j41(19,"p",14)(20,"span"),t.nrm(21,"img",16),t.k0s(),t.EFF(22),t.k0s()()(),t.nrm(23,"div",17),t.k0s(),t.j41(24,"div",7)(25,"div",18)(26,"article")(27,"h5"),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.j41(30,"div",19),t.EFF(31),t.nI1(32,"dynamicDate"),t.k0s()()()(),t.DNE(33,Jt,8,5,"div",20),t.nI1(34,"async"),t.k0s(),t.DNE(35,oe,10,11,"div",21),t.nI1(36,"async"),t.k0s()),2&n){const e=c.ngIf,o=t.XpG();t.R7$(6),t.Y8G("ngIf",e&&!e.avatar),t.R7$(),t.Y8G("ngIf",e.avatar),t.R7$(3),t.SpI(" ",null==e?null:e.firstName," "),t.R7$(4),t.SpI("",null==e?null:e.customerGroupName," "),t.R7$(4),t.SpI(" ",null==e?null:e.email," "),t.R7$(4),t.SpI(" ",null==e?null:e.mobileNumber," "),t.R7$(6),t.JRh(t.bMT(29,10,"Customers.Customer.LastLoginActivity")),t.R7$(3),t.SpI(" ",null!=e&&e.lastLogin?t.i5U(32,12,null==e?null:e.lastLogin,"DD/MM/yyyy"):"Not Yet Logged In"," "),t.R7$(2),t.Y8G("ngIf",t.bMT(34,15,o.sandbox.viewCustomerProduct$)),t.R7$(2),t.Y8G("ngIf",t.bMT(36,17,o.sandbox.viewOrderProduct$))}}let ae=(()=>{class n{constructor(e,o,a,d){this.titleService=e,this.sandbox=o,this.configService=a,this.route=d,this.viewCustomerListImage={},this.pageSize=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.pageSize2=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.pageoffset=0,this.offset=0,this.currentPage=1,this.currentPage2=1,this.offset2=0,this.route.queryParamMap.subscribe(_=>{this.email=_.params.email}),this.titleService.setTitle("Buyer")}ngOnInit(){sessionStorage.getItem("symbolRight")&&(this.symbolRight=sessionStorage.getItem("symbolRight")),sessionStorage.getItem("symbolLeft")&&(this.symbolLeft=sessionStorage.getItem("symbolLeft")),this.postImageUrl="./assets/img/avatar-img1.png",this.id=this.route.snapshot.paramMap.get("id"),this.imageUrl=this.configService.getImageUrl(),this.getViewCustomer(),this.getViewProduct(),this.getOrderProduct(),this.getViewProductcount(),this.getOrderProductCount()}getViewProduct(e=0){this.offset=(this.currentPage-1)*this.pageSize;const o={};o.limit=this.pageSize,o.offset=this.offset,o.count=0,o.customerId=this.id,this.sandbox.viewCustomerProduct(o),this.sandbox.viewCustomerProduct$.subscribe(a=>{a&&a?.forEach(d=>{d.truncatedText=d?.productName?.length>80?d?.productName.slice(0,80):d?.productName})})}getOrderProduct(){this.offset2=(this.currentPage2-1)*this.pageSize2;const e={};e.limit=this.pageSize2,e.offset=this.offset2,e.count=0,e.emailId=this.email,this.sandbox.viewOrderProduct(e),this.sandbox.viewOrderProduct$.subscribe(o=>{o&&o?.forEach(a=>{a.truncatedText=a?.productName?.length>50?a?.productName.slice(0,50):a?.productName})})}getViewProductcount(){const e={};e.limit=this.pageSize,e.offset=this.offset,e.count=1,e.customerId=this.id,this.sandbox.viewCustomerProductCount(e)}getOrderProductCount(){const e={};e.limit=this.pageSize2,e.offset=this.offset2,e.count=1,e.emailId=this.email,this.sandbox.viewOrderProductCount(e)}onPageChange(e){this.pageSize=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getViewProduct()}onPageChange2(e){this.pageSize2=e.limit,this.currentPage2=Math.floor(e.offset/e.limit)+1,this.getOrderProduct()}orderProductPageChange(e){this.pageoffset=e.pageSize*e.pageIndex,this.pageSize=e.pageSize,this.getOrderProduct()}getViewCustomer(){const e={};e.id=this.id,this.sandbox.viewCustomerDetail(e)}viewCustomerImageLoading(e){this.viewCustomerListImage[e]=!0}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f.hE),t.rXU(i.C),t.rXU(Dt.w),t.rXU(h.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-view"]],decls:6,vars:6,consts:[["fullTextDisplay",""],[1,""],[1,"spinner-wrapper"],[2,"transform","translate(38%, 50%)","position","absolute",3,"isShow"],["class","viewcustomer-wrap",4,"ngIf"],[1,"viewcustomer-wrap"],[1,"view-customer"],[1,"flex","vc-header"],["routerLink","/customers",1,"to-back"],["src","assets/imgs/back.svg","alt",""],[1,"vch-detail"],["class","vchd-image",4,"ngIf"],[1,"vchd-content"],["src","./assets/img/group-ico-sm.png","alt","group"],[1,"d-inline-block"],["src","assets/img/mail-ico-sm.png","alt","email"],["src","assets/img/mobile-ico-sm.png","alt","mobile"],[1,"vch-social"],[1,"customer-activity"],[1,"lastlog"],["class","vc-table",4,"ngIf"],["class","buying-history card custom-card",4,"ngIf"],[1,"vchd-image"],["src","./assets/img/avatar-img1.png","alt","avatar"],["onError","this.src='assets/error-images/Load-icon-Products.png';",3,"src","alt"],[1,"vc-table"],[2,"padding","0 10px"],["class","product-table table-responsive",4,"ngIf"],["class","nodata-found",4,"ngIf"],[1,"product-table","table-responsive"],["class","table","width","100%",4,"ngIf"],["class","pagination flex",4,"ngIf"],["width","100%",1,"table"],["width","60%"],[4,"ngFor","ngForOf"],["onError","this.src='assets/error-images/Load-icon-Products.png';",1,"view-prod-img",3,"src","alt"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],["matTooltipPosition","above",3,"matTooltip"],[1,"pagination","flex"],[3,"pageChange","type","currentPage","totalItems","pageSize"],[1,"nodata-found"],["src","assets/imgs/nodatafound.svg","alt",""],[1,"buying-history","card","custom-card"],[4,"ngIf"],["class","",4,"ngIf"],[1,"order-prod-col"],[2,"padding","10px",3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(o,a){1&o&&(t.j41(0,"div",1)(1,"div",2),t.nrm(2,"app-global-loader",3),t.nI1(3,"async"),t.k0s(),t.DNE(4,ne,37,19,"div",4),t.nI1(5,"async"),t.k0s()),2&o&&(t.R7$(2),t.Y8G("isShow",t.bMT(3,2,a.sandbox.viewCustomerProductLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(5,4,a.sandbox.getDetailCustomer$)))},dependencies:[s.Sq,s.bT,$t.oV,D.$,z.q,h.Wk,s.Jj,At.S,b.D9],styles:[".avatar[_ngcontent-%COMP%]{vertical-align:middle;width:75px!important;height:75px!important;border-radius:50%}.viewcustomer-wrap[_ngcontent-%COMP%]{background:#fff;margin:10px auto;display:grid;grid-template-columns:2fr 1fr;justify-content:flex-start;width:calc(100% - 30px);grid-gap:2rem;gap:2rem}.viewcustomer-wrap[_ngcontent-%COMP%]   .buying-history[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;text-align:center;margin-left:0;font-size:13px;font-weight:500;vertical-align:middle;width:1.2rem;height:1.2rem;border-radius:50%;background:#21ad64;color:#fff}.vch-detail[_ngcontent-%COMP%]{width:calc(100% + -0px);padding-left:0}.vch-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.view-prod-img[_ngcontent-%COMP%]{width:35px;height:35px;object-fit:contain}.no-data[_ngcontent-%COMP%]{min-height:100px;text-align:center;margin:auto;padding-top:45px}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}.back-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:.5rem 0}.back-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#222;font-size:.75rem;color:#fff;margin:0}"]})}}return n})();var G=l(79176);const re=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:wt,canActivate:[G.q],data:{permissionKey:"list-buyer",urls:[{title:"breadcrumbs.Buyers",url:""},{title:"breadcrumbs.ManageBuyer",url:""},{title:"breadcrumbs.BuyersList",url:""}]}},{path:"add",component:A,canActivate:[G.q],data:{permissionKey:"create-buyer",urls:[{title:"breadcrumbs.Buyers",url:"/customers/manage-customers/customer/list"},{title:"breadcrumbs.ManageBuyer",url:"/customers/manage-customers/customer/list"},{title:"breadcrumbs.Add Buyer",url:""}]}},{path:"view/:id",component:ae,canActivate:[G.q],data:{permissionKey:"view-buyer",urls:[{title:"Buyers",url:"/customers/manage-customers/customer/list"},{title:"Manage Buyer",url:"/customers/manage-customers/customer/list"},{title:"Buyer Details",url:""}]}},{path:"edit/:id",component:A,canActivate:[G.q],data:{permissionKey:"update-buyer",urls:[{title:"breadcrumbs.Buyers",url:"/customers/manage-customers/customer/list"},{title:"breadcrumbs.ManageBuyer",url:"/customers/manage-customers/customer/list"},{title:"breadcrumbs.Update Buyer",url:""}]}}];let ie=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(re),h.iI]})}}return n})();var le=l(40528),ce=l(91785),me=l(9948),ue=l(40568),de=l(31984),pe=l(13488),ge=l(32102),he=l(99631),be=l(82765),fe=l(79086),Ce=l(96652),_e=l(40646);let ye=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({providers:[m._,i.C,r.g,g.S,f.hE,L.f,fe.n,{provide:be.OQ,useValue:"check"}],imports:[s.MD,le.D,p.YN,p.X1,ce.G,de.h,ie,C.UN,x.WX,y.X6,he.fS,ge.RG,j.Vm.forFeature([u.f,_e.d,Ce.s]),b.h.forChild({loader:{provide:b.Wr,useFactory:ue.M,deps:[k.Qq]}}),me.C,pe.V]})}}return n})()},52609:(M,I,l)=>{"use strict";l.d(I,{S:()=>m});var s=l(54438),p=l(70524),f=l(60177),y=l(41780);const x=u=>({blur:u});function k(u,i){if(1&u&&(s.j41(0,"p"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&u){const r=s.XpG().$implicit,g=s.XpG();s.R7$(),s.Lme("",g.count," ",s.bMT(2,2,null==r?null:r.name)," ")}}function b(u,i){if(1&u){const r=s.RV6();s.j41(0,"div",5)(1,"button",6),s.bIt("click",function(){s.eBV(r);const h=s.XpG().$implicit,v=s.XpG();return s.Njj(v.actionEvent.emit(null==h?null:h.id))}),s.nrm(2,"img",7),s.EFF(3),s.nI1(4,"translate"),s.k0s()()}if(2&u){const r=s.XpG().$implicit;s.R7$(),s.Y8G("ngClass",s.eq3(6,x,0==r.length))("disabled",0==r.length),s.R7$(),s.Y8G("src",null==r?null:r.image,s.B4B),s.R7$(),s.SpI(" ",s.bMT(4,4,null==r?null:r.name)," ")}}function C(u,i){if(1&u){const r=s.RV6();s.j41(0,"button",8),s.bIt("click",function(){s.eBV(r);const h=s.XpG().$implicit,v=s.XpG();return s.Njj(v.actionEvent.emit(null==h?null:h.id))}),s.EFF(1),s.nI1(2,"translate"),s.k0s()}if(2&u){const r=s.XpG().$implicit;s.R7$(),s.SpI(" ",s.bMT(2,1,null==r?null:r.name)," ")}}function j(u,i){if(1&u&&(s.qex(0),s.DNE(1,k,3,4,"p",2)(2,b,5,8,"div",3)(3,C,3,3,"button",4),s.bVm()),2&u){const r=i.$implicit,g=i.index;s.R7$(),s.Y8G("ngIf",0==g),s.R7$(),s.Y8G("ngIf",g>0&&"resetCheckbox"!==r.id),s.R7$(),s.Y8G("ngIf",g>0&&"resetCheckbox"==r.id)}}let m=(()=>{class u{constructor(){this.count=0,this.bulkList=p.E,this.actionEvent=new s.bkB,this.trackByIndex=r=>r}ngOnInit(){}static{this.\u0275fac=function(g){return new(g||u)}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-bulk-action"]],inputs:{count:"count",bulkList:"bulkList"},outputs:{actionEvent:"actionEvent"},decls:2,vars:2,consts:[[1,"selected-container","flex"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","selected-btn flex",4,"ngIf"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"selected-btn","flex"],["href","javascript:void(0)",3,"click","ngClass","disabled"],["alt","",3,"src"],["href","javascript:void(0)",3,"click"]],template:function(g,h){1&g&&(s.j41(0,"div",0),s.DNE(1,j,4,3,"ng-container",1),s.k0s()),2&g&&(s.R7$(),s.Y8G("ngForOf",h.bulkList)("ngForTrackBy",h.trackByIndex))},dependencies:[f.YU,f.Sq,f.bT,y.D9]})}}return u})()},70524:(M,I,l)=>{"use strict";l.d(I,{E:()=>s,L:()=>p});const s=[{id:"itemSelected",name:"marketplace.common.itemsSelected",image:""},{id:"exportExcel",name:"marketplace.common.Export",image:"assets/img/export-white.svg"},{id:"exportExcelAll",name:"Sales.Orders.ExportAll",image:"assets/img/export-white.svg"},{id:"delete",name:"marketplace.common.Delete",image:"assets/img/trash-white.svg"},{id:"resetCheckbox",name:"marketplace.common.DeselectAll",image:""}];function p(f=[]){return s.length>0?s.filter(y=>f.includes(y.id)):s}},34501:(M,I,l)=>{"use strict";l.d(I,{$:()=>j});var s=l(54438),p=l(60177),f=l(41780);const y=(m,u)=>({active:m,inactive:u});function x(m,u){if(1&m){const i=s.RV6();s.qex(0,3),s.j41(1,"button",10),s.bIt("click",function(){const g=s.eBV(i).$implicit,h=s.XpG(2);return s.Njj(h.goToPage(g))}),s.EFF(2),s.k0s(),s.bVm()}if(2&m){const i=u.$implicit,r=s.XpG(2);s.R7$(),s.Y8G("ngClass",s.l_i(2,y,r.currentPage===i,r.currentPage!==i)),s.R7$(),s.SpI(" ",i," ")}}function k(m,u){if(1&m){const i=s.RV6();s.j41(0,"div",3)(1,"button",4),s.bIt("click",function(){s.eBV(i);const g=s.XpG();return s.Njj(g.goToPreviousPage())}),s.nrm(2,"img",5),s.k0s(),s.DNE(3,x,3,5,"ng-container",6),s.j41(4,"button",4),s.bIt("click",function(){s.eBV(i);const g=s.XpG();return s.Njj(g.goToNextPage())}),s.nrm(5,"img",7),s.k0s(),s.j41(6,"p"),s.EFF(7),s.nI1(8,"translate"),s.k0s(),s.j41(9,"input",8),s.bIt("input",function(g){s.eBV(i);const h=s.XpG();return s.Njj(h.Gotogivenpage(g.target.value))}),s.k0s(),s.j41(10,"div",9),s.EFF(11),s.k0s()()}if(2&m){const i=s.XpG();s.R7$(),s.Y8G("disabled",1===i.currentPage),s.R7$(2),s.Y8G("ngForOf",i.pages),s.R7$(),s.Y8G("disabled",i.currentPage===i.totalPages),s.R7$(3),s.JRh(s.bMT(8,6,"marketplace.common.Page")),s.R7$(2),s.Y8G("value",i.currentPage),s.R7$(2),s.SpI("of ",i.totalPages,"")}}function b(m,u){if(1&m){const i=s.RV6();s.qex(0),s.j41(1,"button",12),s.bIt("click",function(){const g=s.eBV(i).$implicit,h=s.XpG(2);return s.Njj(h.goToPage(g))}),s.EFF(2),s.k0s(),s.bVm()}if(2&m){const i=u.$implicit,r=s.XpG(2);s.R7$(),s.Y8G("disabled",r.currentPage===i),s.R7$(),s.SpI(" ",i," ")}}function C(m,u){if(1&m&&(s.j41(0,"div"),s.DNE(1,b,3,2,"ng-container",11),s.k0s()),2&m){const i=s.XpG();s.R7$(),s.Y8G("ngForOf",i.totalPageItems)}}let j=(()=>{class m{constructor(){this.type="default",this.pageChange=new s.bkB,this.pageSizeOptions=[5,10,25,50]}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get totalPageItems(){const i=Math.ceil(this.totalItems/this.pageSize);return[...Array(i).keys()].map(r=>r+1)}get currentPageStart(){return(this.currentPage-1)*this.pageSize+1}get currentPageEnd(){const i=this.currentPage*this.pageSize;return i>this.totalItems?this.totalItems:i}get pages(){const i=this.totalPages,g=[];let v=Math.max(1,this.currentPage-Math.floor(2.5)),O=Math.min(i,v+5-1);O-v+1<5&&(v=Math.max(1,O-5+1));for(let E=v;E<=O;E++)g.push(E);return g}pageChanged(i){this.pageChange.emit({offset:(i.pageIndex+1-1)*this.pageSize,limit:this.pageSize})}goToPage(i){i!==this.currentPage&&this.pageChange.emit({offset:(i-1)*this.pageSize,limit:this.pageSize})}goToFirstPage(){1!==this.currentPage&&this.goToPage(1)}Gotogivenpage(i){!["null","",void 0,0,String(this.currentPage)].includes(i)&&this.totalPages>=i&&this.goToPage(i)}goToLastPage(){this.currentPage!==this.totalPages&&this.goToPage(this.totalPages)}goToPreviousPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)}goToNextPage(){this.currentPage<this.totalPages&&this.goToPage(this.currentPage+1)}onPageSizeChange(i){this.pageSize=i.target.value,this.pageChange.emit({offset:0,limit:this.pageSize})}static{this.\u0275fac=function(r){return new(r||m)}}static{this.\u0275cmp=s.VBU({type:m,selectors:[["app-reusable-pagination"]],inputs:{type:"type",currentPage:"currentPage",pageSize:"pageSize",totalItems:"totalItems"},outputs:{pageChange:"pageChange"},decls:3,vars:3,consts:[[1,"pagination","flex",3,"ngSwitch"],["class","page-count flex",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"page-count","flex"],[1,"icon-button",3,"click","disabled"],["src","assets/img/arrow-left.svg","alt",""],["class","page-count flex",4,"ngFor","ngForOf"],["src","assets/img/arrow-right.svg","alt",""],["readonly","true",3,"input","value"],[1,"page-info"],[3,"click","ngClass"],[4,"ngFor","ngForOf"],[1,"number-button",3,"click","disabled"]],template:function(r,g){1&r&&(s.j41(0,"div",0),s.DNE(1,k,12,8,"div",1)(2,C,2,1,"div",2),s.k0s()),2&r&&(s.Y8G("ngSwitch",g.type),s.R7$(),s.Y8G("ngSwitchCase","numbers"),s.R7$(),s.Y8G("ngSwitchCase","fullnumbers"))},dependencies:[p.YU,p.Sq,p.ux,p.e1,f.D9],styles:[".pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:16px;margin:0 5px}.page-size-selector[_ngcontent-%COMP%]{margin-left:10px}.number-button[_ngcontent-%COMP%]{padding:5px;border:1px solid grey;margin:2px}"]})}}return m})()},55735:(M,I,l)=>{"use strict";l.d(I,{i:()=>j});var s=l(54438),p=l(37886),f=l(73857),y=l(52619),x=l(41780),k=l(60177);function b(m,u){if(1&m&&(s.j41(0,"p"),s.EFF(1),s.k0s()),2&m){const i=s.XpG();s.R7$(),s.SpI(" Cannot recover a deleted ",i.variantMessage,". Are you sure you want to proceed with deletion ?")}}function C(m,u){if(1&m&&(s.j41(0,"p"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&m){const i=s.XpG();s.R7$(),s.Lme("",s.bMT(2,2,"common.Are you sure want to delete this")," ",i.deleteMessage,"?")}}let j=(()=>{class m{constructor(i,r,g,h){this.activeModal=i,this.sellerSandbox=r,this.productSandbox=g,this.translate=h}ngOnInit(){}close(){this.activeModal.close()}deleteContent(){"vendor"===this.key?(this.sellerSandbox.deleteSeller({vendorId:this.id}),this.sellerSandbox.deleteLoaded$.subscribe(i=>{!0===i&&this.activeModal.close("deleted")})):"product"===this.key?(this.productSandbox.doProductDelete({productId:this.id}),this.productSandbox.productDeleteLoaded$.subscribe(i=>{!0===i&&this.activeModal.close("deleted")})):this.activeModal.close("deleted"),this.deleteMessage=""}static{this.\u0275fac=function(r){return new(r||m)(s.rXU(p.Lw),s.rXU(f.f),s.rXU(y.F),s.rXU(x.c$))}}static{this.\u0275cmp=s.VBU({type:m,selectors:[["app-delete-confirmation-dialog"]],inputs:{deleteMessage:"deleteMessage",variantMessage:"variantMessage"},decls:17,vars:11,consts:[[1,"modal-body"],["type","button",1,"close",3,"click"],["aria-hidden","true",2,"background-color","white"],[4,"ngIf"],[1,"delete-btns","flex"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(r,g){1&r&&(s.j41(0,"div",0)(1,"button",1),s.bIt("click",function(){return g.close()}),s.j41(2,"span",2),s.EFF(3,"\xd7"),s.k0s()(),s.j41(4,"h3"),s.EFF(5),s.nI1(6,"translate"),s.k0s(),s.DNE(7,b,2,1,"p",3)(8,C,3,4,"p",3),s.nrm(9,"h4"),s.j41(10,"div",4)(11,"button",5),s.bIt("click",function(){return g.close()}),s.EFF(12),s.nI1(13,"translate"),s.k0s(),s.j41(14,"button",6),s.bIt("click",function(){return g.deleteContent()}),s.EFF(15),s.nI1(16,"translate"),s.k0s()()()),2&r&&(s.R7$(5),s.JRh(s.bMT(6,5,"common.Delete Confirmation")),s.R7$(2),s.Y8G("ngIf",g.variantMessage),s.R7$(),s.Y8G("ngIf",!g.variantMessage),s.R7$(4),s.SpI("",s.bMT(13,7,"common.Cancel")," "),s.R7$(3),s.SpI("",s.bMT(16,9,"common.Delete")," "))},dependencies:[k.bT,x.D9],styles:[".modal-title[_ngcontent-%COMP%]{padding:30px 30px 5px;border-bottom:1px solid #eeeeee}.modal-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.close[_ngcontent-%COMP%]{padding:10px;border:none}.close[_ngcontent-%COMP%]:focus{outline:none!important}.modal-footer[_ngcontent-%COMP%]{justify-content:center!important}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]})}}return m})()},2578:function(M,I){var l,p;void 0!==(p="function"==typeof(l=function(){"use strict";function y(m,u,i){var r=new XMLHttpRequest;r.open("GET",m),r.responseType="blob",r.onload=function(){j(r.response,u,i)},r.onerror=function(){console.error("could not download file")},r.send()}function x(m){var u=new XMLHttpRequest;u.open("HEAD",m,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function k(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(u)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(m,u,i){var r=b.URL||b.webkitURL,g=document.createElement("a");g.download=u=u||m.name||"download",g.rel="noopener","string"==typeof m?(g.href=m,g.origin===location.origin?k(g):x(g.href)?y(m,u,i):k(g,g.target="_blank")):(g.href=r.createObjectURL(m),setTimeout(function(){r.revokeObjectURL(g.href)},4e4),setTimeout(function(){k(g)},0))}:"msSaveOrOpenBlob"in navigator?function(m,u,i){if(u=u||m.name||"download","string"!=typeof m)navigator.msSaveOrOpenBlob(function f(m,u){return typeof u>"u"?u={autoBom:!1}:"object"!=typeof u&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\ufeff",m],{type:m.type}):m}(m,i),u);else if(x(m))y(m,u,i);else{var r=document.createElement("a");r.href=m,r.target="_blank",setTimeout(function(){k(r)})}}:function(m,u,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof m)return y(m,u,i);var g="application/octet-stream"===m.type,h=/constructor/i.test(b.HTMLElement)||b.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||g&&h||C)&&typeof FileReader<"u"){var O=new FileReader;O.onloadend=function(){var t=O.result;t=v?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},O.readAsDataURL(m)}else{var E=b.URL||b.webkitURL,P=E.createObjectURL(m);r?r.location=P:location.href=P,r=null,setTimeout(function(){E.revokeObjectURL(P)},4e4)}});b.saveAs=j.saveAs=j,M.exports=j})?l.apply(I,[]):l)&&(M.exports=p)}}]);